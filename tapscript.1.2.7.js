var tapscript=function(n){"use strict";function H(e){let t,r=0;const n=e.reduce((e,t)=>e+t.length,0),i=new Uint8Array(n);for(const n of e)for(t=0;t<n.length;r++,t++)i[r]=n[t];return i}function Z(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("Wrong positive integer: "+e)}function R(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0<t.length&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=`+e.length)}var j={number:Z,bool:function(e){if("boolean"!=typeof e)throw new Error("Expected boolean, not "+e)},bytes:R,hash:function(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");Z(e.outputLen),Z(e.blockLen)},exists:function(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")},output:function(e,t){R(e);t=t.outputLen;if(e.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}};const D="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,z=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),F=(e,t)=>e<<32-t|e>>>t;if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");function q(e){if((e="string"==typeof e?function(e){if("string"!=typeof e)throw new TypeError("utf8ToBytes expected string, got "+typeof e);return(new TextEncoder).encode(e)}(e):e)instanceof Uint8Array)return e;throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`)}Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));var e=class{clone(){return this._cloneInto()}};function K(t){var e=e=>t().update(q(e)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}var t=class extends e{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=z(this.buffer)}update(t){j.exists(this);const{view:r,buffer:n,blockLen:i}=this,s=(t=q(t)).length;for(let e=0;e<s;){var a=Math.min(i-this.pos,s-e);if(a!==i)n.set(t.subarray(e,e+a),this.pos),this.pos+=a,e+=a,this.pos===i&&(this.process(r,0),this.pos=0);else{const r=z(t);for(;i<=s-e;e+=i)this.process(r,e)}}return this.length+=t.length,this.roundClean(),this}digestInto(e){j.exists(this),j.output(e,this),this.finished=!0;var t,r,n,i,s,{buffer:a,view:o,blockLen:u,isLE:h}=this;let c=this["pos"];a[c++]=128,this.buffer.subarray(c).fill(0),this.padOffset>u-c&&(this.process(o,0),c=0);for(let e=c;e<u;e++)a[e]=0;t=o,r=u-8,n=BigInt(8*this.length),i=h,"function"==typeof t.setBigUint64?t.setBigUint64(r,n,i):(f=BigInt(32),s=BigInt(4294967295),f=Number(n>>f&s),n=Number(n&s),s=i?0:4,t.setUint32(r+(i?4:0),f,i),t.setUint32(r+s,n,i)),this.process(o,0);var d=z(e),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");var l=f/4,p=this.get();if(l>p.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)d.setUint32(4*e,p[e],h)}digest(){var{buffer:e,outputLen:t}=this,e=(this.digestInto(e),e.slice(0,t));return this.destroy(),e}_cloneInto(e){(e=e||new this.constructor).set(...this.get());var{blockLen:t,buffer:r,length:n,finished:i,destroyed:s,pos:a}=this;return e.length=n,e.pos=a,e.finished=i,e.destroyed=s,n%t&&e.buffer.set(r),e}};const V=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),M=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),G=new Uint32Array(64);let $=class extends t{constructor(){super(64,32,8,!1),this.A=0|M[0],this.B=0|M[1],this.C=0|M[2],this.D=0|M[3],this.E=0|M[4],this.F=0|M[5],this.G=0|M[6],this.H=0|M[7]}get(){var{A:e,B:t,C:r,D:n,E:i,F:s,G:a,H:o}=this;return[e,t,r,n,i,s,a,o]}set(e,t,r,n,i,s,a,o){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|s,this.G=0|a,this.H=0|o}process(t,r){for(let e=0;e<16;e++,r+=4)G[e]=t.getUint32(r,!1);for(let e=16;e<64;e++){const r=G[e-15],n=G[e-2],i=F(r,7)^F(r,18)^r>>>3,s=F(n,17)^F(n,19)^n>>>10;G[e]=s+G[e-7]+i+G[e-16]|0}let{A:n,B:i,C:s,D:a,E:o,F:u,G:h,H:c}=this;for(let e=0;e<64;e++){const r=c+(F(o,6)^F(o,11)^F(o,25))+((l=o)&u^~l&h)+V[e]+G[e]|0,p=(F(n,2)^F(n,13)^F(n,22))+(l=n,d=i,f=s,l&d^l&f^d&f)|0;c=h,h=u,u=o,o=a+r|0,a=s,s=i,i=n,n=r+p|0}var d,f,l;n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,a=a+this.D|0,o=o+this.E|0,u=u+this.F|0,h=h+this.G|0,c=c+this.H|0,this.set(n,i,s,a,o,u,h,c)}roundClean(){G.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},W=class extends ${constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};const Y=K(()=>new $),J=(K(()=>new W),BigInt(2**32-1)),Q=BigInt(32);function X(e,t=!1){return t?{h:Number(e&J),l:Number(e>>Q&J)}:{h:0|Number(e>>Q&J),l:0|Number(e&J)}}var ee=(e,t,r)=>e>>>r,te=(e,t,r)=>e<<32-r|t>>>r,re=(e,t,r)=>e>>>r|t<<32-r,ne=(e,t,r)=>e<<32-r|t>>>r,ie=(e,t,r)=>e<<64-r|t>>>r-32,se=(e,t,r)=>e>>>r-32|t<<64-r,ae=function(e,t,r,n){t=(t>>>0)+(n>>>0);return{h:e+r+(t/2**32|0)|0,l:0|t}},oe=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),ue=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,he=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),ce=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,de=(e,t,r,n,i,s)=>t+r+n+i+s+(e/2**32|0)|0,fe=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0);const[le,pe]=function(t,r=!1){var n=new Uint32Array(t.length),i=new Uint32Array(t.length);for(let e=0;e<t.length;e++){var{h:s,l:a}=X(t[e],r);[n[e],i[e]]=[s,a]}return[n,i]}(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),ge=new Uint32Array(80),ye=new Uint32Array(80);let me=class extends t{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){var{Ah:e,Al:t,Bh:r,Bl:n,Ch:i,Cl:s,Dh:a,Dl:o,Eh:u,El:h,Fh:c,Fl:d,Gh:f,Gl:l,Hh:p,Hl:g}=this;return[e,t,r,n,i,s,a,o,u,h,c,d,f,l,p,g]}set(e,t,r,n,i,s,a,o,u,h,c,d,f,l,p,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|n,this.Ch=0|i,this.Cl=0|s,this.Dh=0|a,this.Dl=0|o,this.Eh=0|u,this.El=0|h,this.Fh=0|c,this.Fl=0|d,this.Gh=0|f,this.Gl=0|l,this.Hh=0|p,this.Hl=0|g}process(t,r){for(let e=0;e<16;e++,r+=4)ge[e]=t.getUint32(r),ye[e]=t.getUint32(r+=4);for(let e=16;e<80;e++){const r=0|ge[e-15],n=0|ye[e-15],i=re(r,n,1)^re(r,n,8)^ee(r,n,7),s=ne(r,n,1)^ne(r,n,8)^te(r,n,7),a=0|ge[e-2],o=0|ye[e-2],u=re(a,o,19)^ie(a,o,61)^ee(a,o,6),h=ne(a,o,19)^se(a,o,61)^te(a,o,6),c=he(s,h,ye[e-7],ye[e-16]),d=ce(c,i,u,ge[e-7],ge[e-16]);ge[e]=0|d,ye[e]=0|c}let{Ah:n,Al:i,Bh:s,Bl:a,Ch:o,Cl:u,Dh:h,Dl:c,Eh:d,El:f,Fh:l,Fl:p,Gh:g,Gl:y,Hh:m,Hl:v}=this;for(let e=0;e<80;e++){const r=re(d,f,14)^re(d,f,18)^ie(d,f,41),w=ne(d,f,14)^ne(d,f,18)^se(d,f,41),x=d&l^~d&g,_=f&p^~f&y,E=fe(v,w,_,pe[e],ye[e]),A=de(E,m,r,x,le[e],ge[e]),k=0|E,O=re(n,i,28)^ie(n,i,34)^ie(n,i,39),S=ne(n,i,28)^se(n,i,34)^se(n,i,39),I=n&s^n&o^s&o,P=i&a^i&u^a&u;m=0|g,v=0|y,g=0|l,y=0|p,l=0|d,p=0|f,{h:d,l:f}=ae(0|h,0|c,0|A,0|k),h=0|o,c=0|u,o=0|s,u=0|a,s=0|n,a=0|i;var b=oe(k,S,P);n=ue(b,A,O,I),i=0|b}({h:n,l:i}=ae(0|this.Ah,0|this.Al,0|n,0|i)),{h:s,l:a}=ae(0|this.Bh,0|this.Bl,0|s,0|a),{h:o,l:u}=ae(0|this.Ch,0|this.Cl,0|o,0|u),{h,l:c}=ae(0|this.Dh,0|this.Dl,0|h,0|c),{h:d,l:f}=ae(0|this.Eh,0|this.El,0|d,0|f),{h:l,l:p}=ae(0|this.Fh,0|this.Fl,0|l,0|p),{h:g,l:y}=ae(0|this.Gh,0|this.Gl,0|g,0|y),{h:m,l:v}=ae(0|this.Hh,0|this.Hl,0|m,0|v),this.set(n,i,s,a,o,u,h,c,d,f,l,p,g,y,m,v)}roundClean(){ge.fill(0),ye.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},ve=class extends me{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}},be=class extends me{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},we=class extends me{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}};const xe=K(()=>new me),_e=(K(()=>new ve),K(()=>new be),K(()=>new we),new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8])),Ee=Uint8Array.from({length:16},(e,t)=>t),Ae=Ee.map(e=>(9*e+5)%16);let ke=[Ee],Oe=[Ae];for(let e=0;e<4;e++)for(var Se of[ke,Oe])Se.push(Se[e].map(e=>_e[e]));const Ie=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>new Uint8Array(e)),Pe=ke.map((e,t)=>e.map(e=>Ie[t][e])),Be=Oe.map((e,t)=>e.map(e=>Ie[t][e])),Te=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),Ue=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),Ce=(e,t)=>e<<t|e>>>32-t;function Ne(e,t,r,n){return 0===e?t^r^n:1===e?t&r|~t&n:2===e?(t|~r)^n:3===e?t&n|r&~n:t^(r|~n)}const Le=new Uint32Array(16);let He=class extends t{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){var{h0:e,h1:t,h2:r,h3:n,h4:i}=this;return[e,t,r,n,i]}set(e,t,r,n,i){this.h0=0|e,this.h1=0|t,this.h2=0|r,this.h3=0|n,this.h4=0|i}process(t,r){for(let e=0;e<16;e++,r+=4)Le[e]=t.getUint32(r,!0);let n=0|this.h0,i=n,s=0|this.h1,a=s,o=0|this.h2,u=o,h=0|this.h3,c=h,d=0|this.h4,f=d;for(let t=0;t<5;t++){const r=4-t,l=Te[t],p=Ue[t],g=ke[t],y=Oe[t],m=Pe[t],v=Be[t];for(let e=0;e<16;e++){const i=Ce(n+Ne(t,s,o,h)+Le[g[e]]+l,m[e])+d|0;n=d,d=h,h=0|Ce(o,10),o=s,s=i}for(let e=0;e<16;e++){const n=Ce(i+Ne(r,a,u,c)+Le[y[e]]+p,v[e])+f|0;i=f,f=c,c=0|Ce(u,10),u=a,a=n}}this.set(this.h1+o+c|0,this.h2+h+f|0,this.h3+d+i|0,this.h4+n+a|0,this.h0+s+u|0)}roundClean(){Le.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}};const Ze=K(()=>new He);let Re=class extends e{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,j.hash(e);t=q(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;var r=this.blockLen,n=new Uint8Array(r);n.set(t.length>r?e.create().update(t).digest():t);for(let e=0;e<n.length;e++)n[e]^=54;this.iHash.update(n),this.oHash=e.create();for(let e=0;e<n.length;e++)n[e]^=106;this.oHash.update(n),n.fill(0)}update(e){return j.exists(this),this.iHash.update(e),this}digestInto(e){j.exists(this),j.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){var e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){var{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:s,outputLen:a}=this;return(e=e||Object.create(Object.getPrototypeOf(this),{})).finished=n,e.destroyed=i,e.blockLen=s,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const je=(e,t,r)=>new Re(e,t).update(r).digest(),De=(je.create=(e,t)=>new Re(e,t),new TextEncoder),ze=new TextDecoder;function Fe(e){return De.encode(e)}function qe(e){var t=new Uint8Array(e.length/2);let r,n=0;if(null!==e.match(/[^a-fA-f0-9]/))throw new TypeError("Invalid hex string: "+e);if(0<e.length%2)throw new Error("Hex string length is uneven: "+e.length);for(r=0;r<e.length;r+=2)t[n]=parseInt(e.slice(r,r+2),16),n+=1;return t}function Ke(e){if(0===e)return Uint8Array.of(0);for(var t=[];0<e;){var r=255&e;t.push(r),e=(e-r)/256}return new Uint8Array(t)}function Ve(e){var t=new Array(8*e.length);let r=0;for(const n of e){if(255<n)throw new Error(`Invalid byte value: ${n}. Byte values must be between 0 and 255.`);for(let e=7;0<=e;e--,r++)t[r]=n>>e&1}return t}function Me(e){if(0n===e)return Uint8Array.of(0);for(var t=[];0n<e;){var r=0xffn&e;t.push(Number(r)),e=(e-r)/256n}return new Uint8Array(t)}function Ge(e){return ze.decode(e)}function $e(t){var r=new Array(t.length);for(let e=0;e<t.length;e++)r.push(t[e].toString(16).padStart(2,"0"));return r.join("")}function r(e,t=!0){if(e instanceof ArrayBuffer)return new Uint8Array(e);if(e instanceof Uint8Array)return new Uint8Array(e);switch(typeof e){case"bigint":return Me(e);case"boolean":return Uint8Array.of(e?1:0);case"number":return Ke(e);case"string":return t?qe(e):De.encode(e);default:throw TypeError("Unsupported format:"+String(typeof e))}}function We(e){return Y(Y(r(e)))}const Ye={sha256:function(e){return Y(r(e))},sha512:function(e){return xe(r(e))},ripe160:function(e){return xe(r(e))},hash256:We,hash160:function(e){return Ze(Y(r(e)))},hmac256:function(e,t){return je(Y,r(e),r(t))},hmac512:function(e,t){return je(xe,r(e),r(t))}},Je=new TextEncoder,Qe=[{name:"base58",charset:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}];function Xe(e){for(const t of Qe)if(t.name===e)return t.charset;throw TypeError("Charset does not exist: "+e)}const et={encode:function(e,t,r=!1){"string"==typeof e&&(e=Je.encode(e));var n=Xe(t),i=n.length,s=[];let a,o,u,h="",c=0;for(a=0;a<e.length;a++)for(c=0,o=e[a],h+=0<o||0<(h.length^a)?"":"1";c in s||0<o;)u=0<(u=s[c])?256*u+o:o,o=u/i|0,s[c]=u%i,c++;for(;0<c--;)h+=n[s[c]];return r&&0<h.length%4?h+"=".repeat(4-h.length%4):h},decode:function(e,t){var r=Xe(t),n=r.length,i=[],s=[];e=e.replace("=","");let a,o,u,h=0;for(a=0;a<e.length;a++){if(h=0,(o=r.indexOf(e[a]))<0)throw new Error("Character range out of bounds: "+o);for(0<o||0<(s.length^a)||s.push(0);h in i||0<o;)u=0<(u=i[h])?u*n+o:o,o=u>>8,i[h]=u%256,h++}for(;0<h--;)s.push(i[h]);return new Uint8Array(s)}},tt="qpzry9x8gf2tvdw0s3jn54khce6mua7l",rt=[996825010,642813549,513874426,1027748829,705979059],nt=[{version:0,name:"bech32",const:1},{version:1,name:"bech32m",const:734539939}];function it(t){let r=1;for(let e=0;e<t.length;++e){var n=r>>25;r=(33554431&r)<<5^t[e];for(let e=0;e<5;++e)0!=(n>>e&1)&&(r^=rt[e])}return r}function st(e){var t=[];let r;for(r=0;r<e.length;++r)t.push(e.charCodeAt(r)>>5);for(t.push(0),r=0;r<e.length;++r)t.push(31&e.charCodeAt(r));return t}function at(e,t,r,n=!0){var i=[];let s=0,a=0;var o=(1<<r)-1,u=(1<<t+r-1)-1;for(const n of e){if(n<0||0<n>>t)throw new Error("Failed to perform base conversion. Invalid value: "+String(n));for(s=(s<<t|n)&u,a+=t;a>=r;)a-=r,i.push(s>>a&o)}if(n)0<a&&i.push(s<<r-a&o);else if(a>=t||0<(s<<r-a&o))throw new Error("Failed to perform base conversion. Invalid Size!");return i}function ot(t){if(!function(e){let t,r,n=!1,i=!1;for(t=0;t<e.length;++t){if((r=e.charCodeAt(t))<33||126<r)return;97<=r&&r<=122&&(n=!0),65<=r&&r<=90&&(i=!0)}return!n||!i}(t))throw new Error("Encoded string goes out of bounds!");if(i=t=t.toLowerCase(),(s=i.lastIndexOf("1"))<1||s+7>i.length||90<i.length)throw new Error("Encoded string has invalid separator!");const r=[],n=t.lastIndexOf("1"),e=t.substring(0,n);for(let e=n+1;e<t.length;++e){const n=tt.indexOf(t.charAt(e));if(-1===n)throw new Error("Character idx out of bounds: "+String(e));r.push(n)}var i,s=nt.find(e=>e.version===r[0])??nt[0];if(i=r,s=s,it(st(e).concat(i))!==s.const)throw new Error("Checksum verification failed!");return[e,r.slice(0,r.length-6)]}function ut(e){var t=(e=e.toLowerCase()).split("1",1)[0],[e,r]=ot(e),n=at(r.slice(1),5,8,!1),i=n.length;switch(!0){case t!==e:throw new Error("Returned hrp string is invalid.");case null===n||i<2||40<i:throw new Error("Decoded string is invalid or out of spec.");case 16<r[0]:throw new Error("Returned version bit is out of range.");default:return Uint8Array.from(n)}}const ht={encode:function(e,t="bc",r=0){t=function(i,e,t){var r=e.concat(function(e,t){var r=it(st(i).concat(e).concat([0,0,0,0,0,0]))^t.const,n=[];for(let e=0;e<6;++e)n.push(r>>5*(5-e)&31);return n}(e,t));let n=i+"1";for(let e=0;e<r.length;++e)n+=tt.charAt(r[e]);return n}(t,[r,...at([...e],8,5)],nt.find(e=>e.version===r)??nt[0]);return ut(t),t},decode:ut,version:function(e){var[,e]=ot(e=e.toLowerCase());return e[0]}},ct="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",dt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",ft=new TextEncoder;function lt(t,e=!1){"string"==typeof t&&(t=ft.encode(t));var r=e?dt:ct;let n="",i=0,s=0;for(let e=0;e<t.length;e++)for(s=s<<8|t[e],i+=8;6<=i;)i-=6,n+=r[s>>i&63];if(0<i)for(s<<=6-i,n+=r[63&s];i<6;)n+=e?"":"=",i+=2;return n}function pt(e,t=!1){var r=(t||e.includes("-")||e.includes("_")?dt:ct).split(""),n=(e=e.replace(/=+$/,"")).split("");let i=0,s=0;var a=[];for(let e=0;e<n.length;e++){const t=n[e],o=r.indexOf(t);if(-1===o)throw new Error("Invalid character: "+t);i+=6,s=s<<6|o,8<=i&&(i-=8,a.push(s>>>i&255))}return new Uint8Array(a)}const gt={encode:lt,decode:pt};let y=class n extends Uint8Array{static{this.num=(e,t,r="le")=>{e=new n(Ke(e),t);return"le"===r?e.reverse():e}}static{this.big=(e,t,r="le")=>{e=new n(Me(e),t);return"le"===r?e.reverse():e}}static{this.bin=(e,t)=>new n(function(n){if("string"==typeof n)n=n.split("").map(Number);else if(!Array.isArray(n))throw new Error("Invalid input type: expected a string or an array of numbers.");if(n.length%8!=0)throw new Error("Binary array is invalid length: "+n.length);var i=new Uint8Array(n.length/8);for(let r=0,e=0;r<n.length;r+=8,e++){let t=0;for(let e=0;e<8;e++)t|=n[r+e]<<7-e;i[e]=t}return i}(e),t)}static{this.any=(e,t)=>new n(r(e,!1),t)}static{this.raw=(e,t)=>new n(e,t)}static{this.str=(e,t)=>new n(Fe(e),t)}static{this.hex=(e,t)=>new n(qe(e),t)}static{this.json=e=>new n(Fe(JSON.stringify(e)))}static{this.bytes=(e,t)=>new n(r(e,!0),t)}static{this.base64=e=>new n(gt.decode(e))}static{this.b64url=e=>{return new n(pt(e,!0))}}static{this.bech32=e=>new n(ht.decode(e))}static{this.b58chk=e=>new n((e=>{var t=(e=et.decode(e,"base58")).slice(0,-4),e=e.slice(-4);if(We(t).slice(0,4).toString()!==e.toString())throw new Error("Invalid checksum!");return t})(e))}constructor(e,t){return e=r(e,!0),"number"==typeof t&&((t=new Uint8Array(t).fill(0)).set(new Uint8Array(e)),e=t.buffer),super(e),this}get arr(){return[...this]}get num(){return this.toNum()}get big(){return this.toBig()}get str(){return this.toStr()}get hex(){return this.toHex()}get raw(){return new Uint8Array(this)}get bits(){return this.toBits()}get bin(){return this.toBin()}get b58chk(){return this.tob58chk()}get base64(){return this.toBase64()}get b64url(){return this.toB64url()}get digest(){return this.toHash()}get id(){return this.toHash().hex}get stream(){return new yt(this)}toNum(r="le"){{var n="le"===r?this.reverse():this;let e,t=0;for(e=n.length-1;0<=e;e--)t=256*t+n[e];return Number(t)}}toBig(r="le"){{var n="le"===r?this.reverse():this;let e,t=0n;for(e=n.length-1;0<=e;e--)t=256n*t+BigInt(n[e]);return BigInt(t)}}toHash(e="sha256"){switch(e){case"sha256":return new n(Ye.sha256(this));case"hash256":return new n(Ye.hash256(this));case"ripe160":return new n(Ye.ripe160(this));case"hash160":return new n(Ye.hash160(this));default:throw new Error("Unrecognized format:"+String(e))}}toHmac(e,t="hmac256"){switch(t){case"hmac256":return new n(Ye.hmac256(e,this));case"hmac512":return new n(Ye.hmac512(e,this));default:throw new Error("Unrecognized format:"+String(t))}}toStr(){return Ge(this)}toHex(){return $e(this)}toJson(){return JSON.parse(Ge(this))}toBytes(){return new Uint8Array(this)}toBits(){return Ve(this)}toBin(){return Ve(this).join("")}tob58chk(){var e=this;return e=H([e,We(e).slice(0,4)]),et.encode(e,"base58")}toB64url(){return lt(this,!0)}toBase64(){return gt.encode(this)}toBech32(e,t=0){return ht.encode(this,e,t)}prepend(e){return n.join([n.bytes(e),this])}append(e){return n.join([this,n.bytes(e)])}slice(e,t){return new n(new Uint8Array(this).slice(e,t))}subarray(e,t){return new n(new Uint8Array(this).subarray(e,t))}reverse(){return new n(new Uint8Array(this).reverse())}write(e,t){this.set(e,t)}prefixSize(e){e=n.varInt(this.length,e);return n.join([e,this])}static from(e){return new n(Uint8Array.from(e))}static of(...e){return new n(Uint8Array.of(...e))}static join(e){e=e.map(e=>n.bytes(e));return new n(H(e))}static varInt(e,t){if(e<253)return n.num(e,1);if(e<65536)return n.of(253,...n.num(e,2,t));if(e<4294967296)return n.of(254,...n.num(e,4,t));if(BigInt(e)<0x10000000000000000n)return n.of(255,...n.num(e,8,t));throw new Error("Value is too large: "+e)}static{this.encode=Fe}static{this.decode=Ge}static random(e=32){return new n(function(e=32){if(D&&"function"==typeof D.getRandomValues)return D.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}(e),e)}static normalize(e,t){return new n(r(e,!0),t)}static hexify(e){return $e(r(e,!0))}static serialize(e,t){return new n(function(e){if("object"==typeof e){if(e instanceof Uint8Array)return e;try{return Fe(JSON.stringify(e))}catch{throw TypeError("Object is not serializable.")}}return r(e,!1)}(e),t)}static revive(e){if("string"==typeof(e=e instanceof Uint8Array?Ge(e):e))try{return JSON.parse(e)}catch{}return e}},yt=class{constructor(e){this.data=new Uint8Array(e),this.size=this.data.length}peek(e){if(e>this.size)throw new Error(`Size greater than stream: ${e} > `+this.size);return new y(this.data.slice(0,e).buffer)}read(e){e=e??this.readSize();var t=this.peek(e);return this.data=this.data.slice(e),this.size=this.data.length,t}readSize(e){var t=this.read(1).num;switch(!0){case 0<=t&&t<253:return t;case 253===t:return this.read(2).toNum(e);case 254===t:return this.read(4).toNum(e);case 255===t:return this.read(8).toNum(e);default:throw new Error("Varint is out of range: "+t)}}};function i(e,t){e=y.bytes(e);if(e.length!==t)throw new Error(`Invalid input size: ${e.hex} !== `+t)}function h(e,t){if(t)throw new Error(e);return!1}function mt(e,...t){e=y.str(e).digest.raw,t=t.map(e=>y.normalize(e));return y.join([e,e,y.join(t)]).digest}function vt(e,t="main"){var r="main"===t?["1"]:["m","n"];for(const t of r)if(e.startsWith(t))return!0;return!1}function bt(e,t="main"){var r=y.bytes(e),t="main"===t?y.num(0):y.num(111);return i(e,20),r.prepend(t).tob58chk()}const wt={check:vt,encode:bt,decode:function(e,t="main"){if(vt(e,t))return y.b58chk(e).slice(1);throw new TypeError("Invalid p2pkh address!")},scriptPubKey:function(e){e=y.bytes(e);return i(e,20),["OP_DUP","OP_HASH160",e.hex,"OP_EQUALVERIFY","OP_CHECKSIG"]},fromPubKey:function(e,t){e=y.bytes(e);return i(e,33),bt(e.toHash("hash160"),t)}},xt={OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_SUCCESS80:80,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_SUCCESS98:98,OP_IF:99,OP_NOTIF:100,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_SUCCESS126:126,OP_SUCCESS127:127,OP_SUCCESS128:128,OP_SUCCESS129:129,OP_SIZE:130,OP_SUCCESS131:131,OP_SUCCESS132:132,OP_SUCCESS133:133,OP_SUCCESS134:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_SUCCESS137:137,OP_SUCCESS138:138,OP_1ADD:139,OP_1SUB:140,OP_SUCCESS141:141,OP_SUCCESS142:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_SUCCESS149:149,OP_SUCCESS150:150,OP_SUCCESS151:151,OP_SUCCESS152:152,OP_SUCCESS153:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP1:176,OP_CHECKLOCKTIMEVERIFY:177,OP_CHECKSEQUENCEVERIFY:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_CHECKSIGADD:186};function _t(e){return"string"==typeof e&&e.length%2==0&&/[0-9a-fA-F]/.test(e)}function Et(e){return _t(e)||e instanceof Uint8Array}const At=520;function kt(e=[],t=!0){let r=y.num(0);return Array.isArray(e)&&(r=y.raw(Ot(e))),_t(e)&&(r=y.hex(e)),e instanceof Uint8Array&&(r=y.raw(e)),r=t?r.prefixSize("be"):r}function Ot(e){var t=[];for(const r of e)t.push(function(e){let t=new Uint8Array;if("string"==typeof e){if(e.startsWith("OP_"))return y.num(function(e){for(var[t,r]of Object.entries(xt))if(t===e)return Number(r);throw new Error("OPCODE not found:"+e)}(e),1);t=_t(e)?y.hex(e):y.str(e)}else if(1===(t=y.bytes(e)).length&&t[0]<=16)return 0!==t[0]&&(t[0]+=80),t;if(t.length>At){const e=function(e){for(var t=[],r=new yt(e);r.size>At;)t.push(r.read(At));return t.push(r.read(r.size)),t}(t);return Ot(e)}return y.join([function(e){var t=y.num(76,1),r=y.num(77,1);switch(!0){case e<=75:return y.num(e);case 75<e&&e<256:return y.join([t,y.num(e,1)]);case 256<=e&&e<=At:return y.join([r,y.num(e,2,"be")]);default:throw new Error("Invalid word size:"+e.toString())}}(t.length),t])}(r));return 0<t.length?y.join(t):new Uint8Array}function St(i,e=!1){let s=y.bytes(i);if(e){const i=s.stream.readSize("be");if(s.length!==i)throw new Error(`Varint does not match stream size: ${i} !== `+s.length);s=s.slice(1)}{i=s;var a=new yt(i),o=[],u=a.size;let e,t,r,n=0;for(;n<u;)switch(e=a.read(1).num,t=function(e){switch(!0){case 0===e:return"opcode";case 1<=e&&e<=75:return"varint";case 76===e:return"pushdata1";case 77===e:return"pushdata2";case 78===e:return"pushdata4";case e<=254:return"opcode";default:throw new Error("Invalid word range: "+e)}}(e),n++,t){case"varint":o.push(a.read(e).hex),n+=e;break;case"pushdata1":r=a.read(1).reverse().num,o.push(a.read(r).hex),n+=r+1;break;case"pushdata2":r=a.read(2).reverse().num,o.push(a.read(r).hex),n+=r+2;break;case"pushdata4":r=a.read(4).reverse().num,o.push(a.read(r).hex),n+=r+4;break;case"opcode":if(!function(e){switch(!0){case"number"!=typeof e:return;case 0===e:return 1;case[].includes(e):return;case 75<e&&e<254:return 1;default:return}}(e))throw new Error("Invalid OPCODE: "+e);o.push(function(e){if(186<e&&e<255)return"OP_SUCCESS"+String(e);for(var[t,r]of Object.entries(xt))if(r===e)return t;throw new Error("OPCODE not found:"+String(e))}(e));break;default:throw new Error("Word type undefined: "+e)}return o}}const It={toAsm:function(e,t){if((e=Array.isArray(e)?kt(e,t):e)instanceof Uint8Array||_t(e))return St(e,t);throw new Error("Invalid format: "+String(typeof e))},toBytes:function(e,t){if((e instanceof Uint8Array||_t(e))&&(e=St(e,t)),Array.isArray(e))return kt(e,t);throw new Error("Invalid format: "+String(typeof e))},toParam:function(e){if(Array.isArray(e))throw new Error("Invalid format: "+String(typeof e));return y.bytes(e)}},m={encode:kt,decode:St,fmt:It};function Pt(e,t="main"){var r="main"===t?["3"]:["2"];for(const t of r)if(e.startsWith(t))return!0;return!1}function Bt(e,t="main"){t="main"===t?y.num(5):y.num(196),e=y.bytes(e);return i(e,20),e.prepend(t).tob58chk()}const Tt={check:Pt,encode:Bt,decode:function(e,t="main"){if(Pt(e,t))return y.b58chk(e).slice(1);throw new TypeError(`Invalid p2sh address for network ${t}:`+e)},scriptPubKey:function(e){return["OP_HASH160",y.bytes(e).hex,"OP_EQUAL"]},fromScript:function(e,t){return Bt(m.fmt.toBytes(e,!1).toHash("hash160"),t)}},Ut={main:"bc",testnet:"tb",signet:"tb",regtest:"bcrt"},Ct=["bc1q","tb1q","bcrt1q"];function Nt(e){for(const t of Ct)if(e.startsWith(t))return!0;return!1}function Lt(e,t="main"){t=Ut[t],e=y.bytes(e);return i(e,20),e.toBech32(t,0)}const Ht={check:Nt,encode:Lt,decode:function(e){if(Nt(e))return y.bech32(e);throw new TypeError("Invalid segwit address!")},scriptPubKey:function(e){e=y.bytes(e);return i(e,20),["OP_0",e.hex]},fromPubKey:function(e,t){e=y.bytes(e);return i(e,33),Lt(e.toHash("hash160"),t)}},Zt=["bc1q","tb1q","bcrt1q"];function Rt(e){for(const t of Zt)if(e.startsWith(t))return!0;return!1}function jt(e,t="main"){t=Ut[t],e=y.bytes(e);return i(e,32),e.toBech32(t,0)}const Dt={check:Rt,encode:jt,decode:function(e){if(Rt(e))return y.bech32(e);throw new TypeError("Invalid segwit address!")},scriptPubKey:function(e){e=y.bytes(e);return i(e,32),["OP_0",e.hex]},fromScript:function(e,t){return jt(m.fmt.toBytes(e,!1).toHash("sha256"),t)}};function zt(e){e=y.bytes(e);return 32<e.length?e.slice(1,33):e}const Ft=["bc1p","tb1p","bcrt1p"];function qt(e){for(const t of Ft)if(e.startsWith(t))return!0;return!1}function Kt(e,t="main"){t=Ut[t],e=y.bytes(e);return i(e,32),e.toBech32(t,1)}const Vt={check:qt,encode:Kt,decode:function(e){if(qt(e))return y.bech32(e);throw new TypeError("Invalid taproot address!")},scriptPubKey:function(e){e=y.bytes(e);return i(e,32),["OP_1",e.hex]},fromPubKey:function(e,t){return Kt(zt(e),t)}},Mt={version:2,vin:[],vout:[],locktime:0},Gt={scriptSig:[],sequence:4294967293,witness:[]},$t={value:0n,scriptPubKey:[]};function Wt(e){e={...Mt,...e};return e.vin=e.vin.map(e=>({...Gt,...e})),e.vout=e.vout.map(e=>({...$t,...e})),e}function Yt(e,t){var{version:e,vin:r,vout:n,locktime:i}=Wt(e),s=!0!==t&&function(e){for(const t of e){const e=t["witness"];if("string"==typeof e||e instanceof Uint8Array||Array.isArray(e)&&0<e.length)return!0}return!1}(r),a=[Jt(e)];s&&a.push(y.hex("0001")),a.push(function(e){var t=[y.varInt(e.length)];for(const r of e){const{txid:e,vout:n,scriptSig:i,sequence:s}=r;t.push(Qt(e)),t.push(Xt(n)),t.push(kt(i,!0)),t.push(er(s))}return y.join(t)}(r)),a.push(function(e){var t=[y.varInt(e.length)];for(const r of e)t.push(function(e){var{value:e,scriptPubKey:t}=e,r=[];return r.push(tr(e)),r.push(kt(t,!0)),y.join(r)}(r));return y.join(t)}(n));for(const e of r)s&&a.push(function(e=[]){var t=[];if(Array.isArray(e)){var r=y.varInt(e.length);t.push(r);for(const n of e)t.push(function(e){return function(e){return Array.isArray(e)?0===e.length:"string"==typeof e&&""===e||1===(e=y.bytes(e)).length&&0===e[0]}(e)?new y(0):kt(e,!0)}(n));return y.join(t)}return y.normalize(e)}(e.witness));return a.push(rr(i)),y.join(a)}function Jt(e){return y.num(e,4).reverse()}function Qt(e){return y.hex(e,32).reverse()}function Xt(e){return y.num(e,4).reverse()}function er(e=4294967293){return y.bytes(e).reverse()}function tr(e){if("number"!=typeof e)return y.big(e,8).reverse();if(e%1!=0)throw new Error("Value must be an integer:"+String(e));return y.num(e,8).reverse()}function rr(e){if("string"==typeof e)return y.hex(e,4);if("number"==typeof e)return y.num(e,4).reverse();throw new Error("Unrecognized format: "+String(e))}function nr(e){"string"==typeof e&&(e=y.hex(e).raw);const t=new yt(e),r=t.read(4).reverse().toNum(),n=function(e){var[t,r]=[...e.peek(2)];if(0!==t)return!1;if(e.read(2),1===r)return!0;throw new Error("Invalid witness flag: "+r)}(t),i=function(t){var r,n=[],i=t.readSize();for(let e=0;e<i;e++)n.push({txid:(r=t).read(32).reverse().toHex(),vout:r.read(4).reverse().toNum(),scriptSig:sr(r,!0),sequence:r.read(4).reverse().toHex(),witness:[]});return n}(t),s=function(t){var r,n=[],i=t.readSize();for(let e=0;e<i;e++)n.push({value:(r=t).read(8).reverse().big,scriptPubKey:sr(r,!0)});return n}(t);if(n)for(const e of i)e.witness=function(t){const r=[],n=t.readSize();for(let e=0;e<n;e++){const n=ir(t,!0);r.push(n??"")}return r}(t);return{version:r,vin:i,vout:s,locktime:t.read(4).reverse().toNum()}}function ir(e,t){t=!0===t?e.readSize("be"):e.size;return 0<t?e.read(t).hex:null}function sr(e,t){e=ir(e,t);return null!==e?e:[]}const ar={toBytes:function(e){if(Et(e))return nr(e),y.bytes(e);if("object"==typeof e)return Yt(e);throw new Error("Invalid format: "+String(typeof e))},toJson:function(e){if(Et(e))return nr(e);if("object"!=typeof e||e instanceof Uint8Array)throw new Error("Invalid format: "+String(typeof e));return Yt(e),Wt(e)}},or=[["p2pkh",/^76a914(?<hash>\w{40})88ac$/],["p2sh",/^a914(?<hash>\w{40})87$/],["p2w-pkh",/^0014(?<hash>\w{40})$/],["p2w-sh",/^0020(?<hash>\w{64})$/],["p2tr",/^5120(?<hash>\w{64})$/]],ur=[192,194,196,198,200,202,204,206,208,210,212,214,216,218,220,222,224,226,228,230,232,234,236,238,240,242,244,246,248,250,252,254,102,126,128,132,150,152,186,188,190];function hr(e=[]){const r=[...e],t=function(e){let t=e.at(-1);return _t(t)&&(t=y.hex(t)),1<e.length&&t instanceof Uint8Array&&80===t[0]?(e.pop(),y.raw(t)):null}(r),n=function(e){let t=e.at(-1);return _t(t)&&(t=y.hex(t)),1<e.length&&t instanceof Uint8Array&&32<t.length&&ur.includes(254&t[0])?(e.pop(),y.raw(t)):null}(r),i=function(e){if(1<e.length){var t=e.at(-1);try{var r=m.fmt.toBytes(t);return e.pop(),r}catch(e){}}return null}(r),s=function(){var e=[];for(const t of r)(_t(t)||t instanceof Uint8Array)&&e.push(t);return e}();return{annex:t,cblock:n,script:i,params:s}}function cr(e){var t=m.fmt.toBytes(e,!1).hex;for(const[e,i]of or){var r=e,n=(i.exec(t)??{})["groups"],n=(n??{})["hash"];if(_t(n))return{type:r,data:y.hex(n)}}return{type:"raw",data:y.hex(t)}}const v={create:Wt,encode:Yt,decode:nr,fmt:ar,util:{getTxid:function(e){return Yt(ar.toJson(e),!0).toHash("hash256").reverse().hex},readScriptPubKey:cr,readWitness:hr}},dr=[["1","p2pkh","main",20,"base58"],["3","p2sh","main",20,"base58"],["m","p2pkh","testnet",20,"base58"],["n","p2pkh","testnet",20,"base58"],["2","p2sh","testnet",20,"base58"],["bc1q","p2w-pkh","main",20,"bech32"],["tb1q","p2w-pkh","testnet",20,"bech32"],["bcrt1q","p2w-pkh","regtest",20,"bech32"],["bc1q","p2w-sh","main",32,"bech32"],["tb1q","p2w-sh","testnet",32,"bech32"],["bcrt1q","p2w-sh","regtest",32,"bech32"],["bc1p","p2tr","main",32,"bech32m"],["tb1p","p2tr","testnet",32,"bech32m"],["bcrt1p","p2tr","regtest",32,"bech32m"]];function fr(e){switch(e){case"p2pkh":return wt;case"p2sh":return Tt;case"p2w-pkh":return Ht;case"p2w-sh":return Dt;case"p2tr":return Vt;default:throw new Error("Invalid address type: "+e)}}function lr(e){var[t,r,n]=function(e){for(const i of dr){var[t,,,r,n]=i;if(e.startsWith(t)&&function(e,t){switch(t){case"base58":return y.b58chk(e).slice(1);case"bech32":case"bech32m":return y.bech32(e);default:throw new Error("Invalid address format: "+t)}}(e,n).length===r)return i}throw new Error("Invalid address: "+e)}(e),i=fr(r),e=i.decode(e,n);return{prefix:t,type:r,network:n,data:e,script:i.scriptPubKey(e)}}const pr={p2pkh:wt,p2sh:Tt,p2wpkh:Ht,p2wsh:Dt,p2tr:Vt,decode:lr,fromScriptPubKey:function(e,t){var{type:e,data:r}=v.util.readScriptPubKey(e);return fr(e).encode(r,t)},toScriptPubKey:function(e){e=lr(e).script;return m.fmt.toAsm(e,!1)}},gr=[1,2,3];function yr(e,t,r={}){var{sigflag:n=1}=r,i=128==(128&n),s=n%128;if(!gr.includes(s))throw new Error("Invalid hash type: "+String(n));var{version:e,vin:a,vout:o,locktime:u}=v.fmt.toJson(e),{txid:h,vout:c,prevout:d,sequence:f}=a[t],d=(d??{})["value"];if(void 0===d)throw new Error("Prevout value is empty!");let l=r.script;if(void 0===(l=void 0===l&&void 0!==r.pubkey?`76a914${y.bytes(r.pubkey).toHash("hash160").hex}88ac`:l))throw new Error("No pubkey / script has been set!");if(m.fmt.toAsm(l).includes("OP_CODESEPARATOR"))throw new Error("This library does not currently support the use of OP_CODESEPARATOR in segwit scripts.");r=[Jt(e),function(e,t){if(!0===t)return y.num(0,32);var r=[];for(const{txid:t,vout:n}of e)r.push(Qt(t)),r.push(Xt(n));return y.join(r).toHash("hash256")}(a,i),function(e,t,r){if(r||1!==t)return y.num(0,32);var n=[];for(const{sequence:t}of e)n.push(er(t));return y.join(n).toHash("hash256")}(a,s,i),Qt(h),Xt(c),m.encode(l,!0),tr(d),er(f),function(e,t,r){var n=[];if(1===r){for(const{value:t,scriptPubKey:r}of e)n.push(tr(t)),n.push(m.encode(r,!0));return y.join(n).toHash("hash256")}if(3===r&&t<e.length){const{value:r,scriptPubKey:i}=e[t];return n.push(tr(r)),n.push(m.encode(i,!0)),y.join(n).toHash("hash256")}return y.num(0,32)}(o,t,s),rr(u),y.num(n,4).reverse()];return y.join(r).toHash("hash256")}function mr(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("Wrong positive integer: "+e)}function vr(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0<t.length&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=`+e.length)}var br={number:mr,bool:function(e){if("boolean"!=typeof e)throw new Error("Expected boolean, not "+e)},bytes:vr,hash:function(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");mr(e.outputLen),mr(e.blockLen)},exists:function(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")},output:function(e,t){vr(e);t=t.outputLen;if(e.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}};const wr="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,xr=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),_r=(e,t)=>e<<32-t|e>>>t;if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");function Er(e){if((e="string"==typeof e?function(e){if("string"!=typeof e)throw new TypeError("utf8ToBytes expected string, got "+typeof e);return(new TextEncoder).encode(e)}(e):e)instanceof Uint8Array)return e;throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`)}Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));t=class{clone(){return this._cloneInto()}};function Ar(t){var e=e=>t().update(Er(e)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function kr(e=32){if(wr&&"function"==typeof wr.getRandomValues)return wr.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}e=class extends t{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=xr(this.buffer)}update(t){br.exists(this);const{view:r,buffer:n,blockLen:i}=this,s=(t=Er(t)).length;for(let e=0;e<s;){var a=Math.min(i-this.pos,s-e);if(a!==i)n.set(t.subarray(e,e+a),this.pos),this.pos+=a,e+=a,this.pos===i&&(this.process(r,0),this.pos=0);else{const r=xr(t);for(;i<=s-e;e+=i)this.process(r,e)}}return this.length+=t.length,this.roundClean(),this}digestInto(e){br.exists(this),br.output(e,this),this.finished=!0;var t,r,n,i,s,{buffer:a,view:o,blockLen:u,isLE:h}=this;let c=this["pos"];a[c++]=128,this.buffer.subarray(c).fill(0),this.padOffset>u-c&&(this.process(o,0),c=0);for(let e=c;e<u;e++)a[e]=0;t=o,r=u-8,n=BigInt(8*this.length),i=h,"function"==typeof t.setBigUint64?t.setBigUint64(r,n,i):(f=BigInt(32),s=BigInt(4294967295),f=Number(n>>f&s),n=Number(n&s),s=i?0:4,t.setUint32(r+(i?4:0),f,i),t.setUint32(r+s,n,i)),this.process(o,0);var d=xr(e),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");var l=f/4,p=this.get();if(l>p.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)d.setUint32(4*e,p[e],h)}digest(){var{buffer:e,outputLen:t}=this,e=(this.digestInto(e),e.slice(0,t));return this.destroy(),e}_cloneInto(e){(e=e||new this.constructor).set(...this.get());var{blockLen:t,buffer:r,length:n,finished:i,destroyed:s,pos:a}=this;return e.length=n,e.pos=a,e.finished=i,e.destroyed=s,n%t&&e.buffer.set(r),e}};const Or=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Sr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ir=new Uint32Array(64);let Pr=class extends e{constructor(){super(64,32,8,!1),this.A=0|Sr[0],this.B=0|Sr[1],this.C=0|Sr[2],this.D=0|Sr[3],this.E=0|Sr[4],this.F=0|Sr[5],this.G=0|Sr[6],this.H=0|Sr[7]}get(){var{A:e,B:t,C:r,D:n,E:i,F:s,G:a,H:o}=this;return[e,t,r,n,i,s,a,o]}set(e,t,r,n,i,s,a,o){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|s,this.G=0|a,this.H=0|o}process(t,r){for(let e=0;e<16;e++,r+=4)Ir[e]=t.getUint32(r,!1);for(let e=16;e<64;e++){const r=Ir[e-15],n=Ir[e-2],i=_r(r,7)^_r(r,18)^r>>>3,s=_r(n,17)^_r(n,19)^n>>>10;Ir[e]=s+Ir[e-7]+i+Ir[e-16]|0}let{A:n,B:i,C:s,D:a,E:o,F:u,G:h,H:c}=this;for(let e=0;e<64;e++){const r=c+(_r(o,6)^_r(o,11)^_r(o,25))+((l=o)&u^~l&h)+Or[e]+Ir[e]|0,p=(_r(n,2)^_r(n,13)^_r(n,22))+(l=n,d=i,f=s,l&d^l&f^d&f)|0;c=h,h=u,u=o,o=a+r|0,a=s,s=i,i=n,n=r+p|0}var d,f,l;n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,a=a+this.D|0,o=o+this.E|0,u=u+this.F|0,h=h+this.G|0,c=c+this.H|0,this.set(n,i,s,a,o,u,h,c)}roundClean(){Ir.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},Br=class extends Pr{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};const Tr=Ar(()=>new Pr),Ur=(Ar(()=>new Br),BigInt(0)),Cr=BigInt(1),Nr=BigInt(2),Lr=e=>e instanceof Uint8Array,Hr=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Zr(t){if(!Lr(t))throw new Error("Uint8Array expected");let r="";for(let e=0;e<t.length;e++)r+=Hr[t[e]];return r}function Rr(e){e=e.toString(16);return 1&e.length?"0"+e:e}function jr(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":"0x"+e)}function Dr(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);if(t.length%2)throw new Error("hex string is invalid: unpadded "+t.length);var r=new Uint8Array(t.length/2);for(let e=0;e<r.length;e++){var n=2*e,n=t.slice(n,2+n),n=Number.parseInt(n,16);if(Number.isNaN(n)||n<0)throw new Error("invalid byte sequence");r[e]=n}return r}function f(e){return jr(Zr(e))}function zr(e){if(Lr(e))return jr(Zr(Uint8Array.from(e).reverse()));throw new Error("Uint8Array expected")}const Fr=(e,t)=>Dr(e.toString(16).padStart(2*t,"0")),qr=(e,t)=>Fr(e,t).reverse();function O(e,t,r){let n;if("string"==typeof t)try{n=Dr(t)}catch(r){throw new Error(e+` must be valid hex string, got "${t}". Cause: `+r)}else{if(!Lr(t))throw new Error(e+" must be hex string or Uint8Array");n=Uint8Array.from(t)}t=n.length;if("number"==typeof r&&t!==r)throw new Error(e+` expected ${r} bytes, got `+t);return n}function Kr(...e){const t=new Uint8Array(e.reduce((e,t)=>e+t.length,0));let r=0;return e.forEach(e=>{if(!Lr(e))throw new Error("Uint8Array expected");t.set(e,r),r+=e.length}),t}const Vr=e=>(Nr<<BigInt(e-1))-Cr,Mr=e=>new Uint8Array(e),Gr=e=>Uint8Array.from(e);function $r(e,n,t){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof n||n<2)throw new Error("qByteLen must be a number");if("function"!=typeof t)throw new Error("hmacFn must be a function");let i=Mr(e),r=Mr(e),s=0;const a=()=>{i.fill(1),r.fill(0),s=0},o=(...e)=>t(r,i,...e),u=(e=Mr())=>{r=o(Gr([0]),e),i=o(),0!==e.length&&(r=o(Gr([1]),e),i=o())};return(e,t)=>{let r;for(a(),u(e);!(r=t((()=>{if(1e3<=s++)throw new Error("drbg: tried 1000 values");let e=0;for(var t=[];e<n;){const n=(i=o()).slice();t.push(n),e+=i.length}return Kr(...t)})()));)u();return a(),r}}const Wr={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function Yr(s,e,t={}){var r=(e,t,r)=>{var n=Wr[t];if("function"!=typeof n)throw new Error(`Invalid validator "${t}", expected function`);var i=s[e];if(!(r&&void 0===i||n(i,s)))throw new Error(`Invalid param ${String(e)}=${i} (${typeof i}), expected `+t)};for(const[s,t]of Object.entries(e))r(s,t,!1);for(const[s,e]of Object.entries(t))r(s,e,!0);return s}var Jr,e=Object.freeze({__proto__:null,bitGet:(e,t)=>e>>BigInt(t)&1n,bitLen:function(e){let t;for(t=0;0n<e;e>>=Cr,t+=1);return t},bitMask:Vr,bitSet:(e,t,r)=>e|(r?Cr:Ur)<<BigInt(t),bytesToHex:Zr,bytesToNumberBE:f,bytesToNumberLE:zr,concatBytes:Kr,createHmacDrbg:$r,ensureBytes:O,equalBytes:function(t,r){if(t.length!==r.length)return!1;for(let e=0;e<t.length;e++)if(t[e]!==r[e])return!1;return!0},hexToBytes:Dr,hexToNumber:jr,numberToBytesBE:Fr,numberToBytesLE:qr,numberToHexUnpadded:Rr,numberToVarBytesBE:e=>Dr(Rr(e)),utf8ToBytes:function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return(new TextEncoder).encode(e)},validateObject:Yr});const d=BigInt(0),S=BigInt(1),Qr=BigInt(2),Xr=BigInt(3),en=BigInt(4),tn=BigInt(5),rn=BigInt(8);function I(e,t){e%=t;return e>=d?e:t+e}function l(e,t,r){let n=e;for(;t-- >d;)n=n*n%r;return n}function nn(e,t){if(e===d||t<=d)throw new Error(`invert: expected positive integers, got n=${e} mod=`+t);let r=I(e,t),n=t,i=d,s=S;for(;r!==d;){const e=n%r,t=i-s*(n/r);n=r,r=e,i=s,s=t}if(n!==S)throw new Error("invert: does not exist");return I(i,t)}function sn(e){if(e%en===Xr){const n=(e+S)/en;return function(e,t){var r=e.pow(t,n);if(e.eql(e.sqr(r),t))return r;throw new Error("Cannot find square root")}}if(e%rn!==tn){var r=e;const h=(r-S)/Qr;let o,t,u;for(o=r-S,t=0;o%Qr===d;o/=Qr,t++);for(u=Qr;u<r&&function(e,t,r){if(r<=d||t<d)throw new Error("Expected power/modulo > 0");if(r===S)return d;let n=S;for(;t>d;)t&S&&(n=n*e%r),e=e*e%r,t>>=S;return n}(u,h,r)!==r-S;u++);if(1===t){const h=(r+S)/en;return function(e,t){var r=e.pow(t,h);if(e.eql(e.sqr(r),t))return r;throw new Error("Cannot find square root")}}const c=(o+S)/Qr;return function(r,e){if(r.pow(e,h)===r.neg(r.ONE))throw new Error("Cannot find square root");let n=t,i=r.pow(r.mul(r.ONE,u),o),s=r.pow(e,c),a=r.pow(e,o);for(;!r.eql(a,r.ONE);){if(r.eql(a,r.ZERO))return r.ZERO;let t=1;for(let e=r.sqr(a);t<n&&!r.eql(e,r.ONE);t++)e=r.sqr(e);const o=r.pow(i,S<<BigInt(n-t-1));i=r.sqr(o),s=r.mul(s,o),a=r.mul(a,i),n=t}return s}}{const i=(e-tn)/rn;return function(e,t){var r=e.mul(t,Qr),r=e.pow(r,i),n=e.mul(t,r),r=e.mul(e.mul(n,Qr),r),n=e.mul(n,e.sub(r,e.ONE));if(e.eql(e.sqr(n),t))return n;throw new Error("Cannot find square root")}}}BigInt(9),BigInt(16);const an=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function on(e){Yr(e,an.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"}))}function un(e,t){t=void 0!==t?t:e.toString(2).length;return{nBitLength:t,nByteLength:Math.ceil(t/8)}}const hn=BigInt(0),cn=BigInt(1);function dn(e){return on(e.Fp),Yr(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...un(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const{bytesToNumberBE:fn,hexToBytes:ln}=e,pn={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(e){var t=pn["Err"];if(e.length<2||2!==e[0])throw new t("Invalid signature integer tag");var r=e[1],n=e.subarray(2,r+2);if(!r||n.length!==r)throw new t("Invalid signature integer: wrong length");if(0===n[0]&&n[1]<=127)throw new t("Invalid signature integer: trailing length");return{d:fn(n),l:e.subarray(r+2)}},toSig(e){var t=pn["Err"],e="string"==typeof e?ln(e):e;if(!(e instanceof Uint8Array))throw new Error("ui8a expected");var r=e.length;if(r<2||48!=e[0])throw new t("Invalid signature tag");if(e[1]!==r-2)throw new t("Invalid signature: incorrect length");var{d:r,l:e}=pn._parseInt(e.subarray(2)),{d:e,l:n}=pn._parseInt(e);if(n.length)throw new t("Invalid signature: left bytes after parsing");return{r:r,s:e}},hexFromSig(e){var t=e=>8<=Number.parseInt(e[0],16)?"00"+e:e,r=e=>{e=e.toString(16);return 1&e.length?"0"+e:e},n=t(r(e.s)),t=t(r(e.r)),e=n.length/2,i=t.length/2,s=r(e),a=r(i);return`30${r(i+e+4)}02${a}${t}02`+s+n}},P=BigInt(0),B=BigInt(1),gn=BigInt(2),yn=BigInt(3),mn=BigInt(4);function vn(e){Yr(e=dn(e),{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"});const l=Object.freeze({lowS:!0,...e}),{Fp:p,n:t}=l,a=p.BYTES+1,o=2*p.BYTES+1;function g(e){return I(e,t)}function y(e){return nn(e,t)}const{ProjectivePoint:m,normPrivateKeyToScalar:v,weierstrassEquation:u,isWithinCurveOrder:b}=function(i){const l=function(){var e=dn(i),{endo:t,Fp:r,a:n}=(Yr(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"}),e);if(t){if(!r.eql(n,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof t||"bigint"!=typeof t.beta||"function"!=typeof t.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}(),p=l["Fp"],t=l.toBytes||((e,t,r)=>{t=t.toAffine();return Kr(Uint8Array.from([4]),p.toBytes(t.x),p.toBytes(t.y))}),r=l.fromBytes||(e=>{e=e.subarray(1);return{x:p.fromBytes(e.subarray(0,p.BYTES)),y:p.fromBytes(e.subarray(p.BYTES,2*p.BYTES))}});function n(e){var{a:t,b:r}=l,n=p.sqr(e),n=p.mul(n,e);return p.add(p.add(n,p.mul(e,t)),r)}function s(e){return"bigint"==typeof e&&P<e&&e<l.n}function c(e){if(!s(e))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function a(t){var{allowedPrivateKeyLengths:e,nByteLength:r,wrapPrivateKey:n,n:i}=l;if(e&&"bigint"!=typeof t){if("string"!=typeof(t=t instanceof Uint8Array?Zr(t):t)||!e.includes(t.length))throw new Error("Invalid key");t=t.padStart(2*r,"0")}let s;try{s="bigint"==typeof t?t:f(O("private key",t,r))}catch(e){throw new Error(`private key must be ${r} bytes, hex or bigint, not `+typeof t)}return c(s=n?I(s,i):s),s}const o=new Map;function g(e){if(!(e instanceof y))throw new Error("ProjectivePoint expected")}class y{constructor(e,t,r){if(this.px=e,this.py=t,this.pz=r,null==e||!p.isValid(e))throw new Error("x required");if(null==t||!p.isValid(t))throw new Error("y required");if(null==r||!p.isValid(r))throw new Error("z required")}static fromAffine(e){var{x:t,y:r}=e||{};if(!e||!p.isValid(t)||!p.isValid(r))throw new Error("invalid affine point");if(e instanceof y)throw new Error("projective point not allowed");e=e=>p.eql(e,p.ZERO);return e(t)&&e(r)?y.ZERO:new y(t,r,p.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const r=p.invertBatch(e.map(e=>e.pz));return e.map((e,t)=>e.toAffine(r[t])).map(y.fromAffine)}static fromHex(e){e=y.fromAffine(r(O("pointHex",e)));return e.assertValidity(),e}static fromPrivateKey(e){return y.BASE.multiply(a(e))}_setWindowSize(e){this._WINDOW_SIZE=e,o.delete(this)}assertValidity(){if(this.is0()){if(l.allowInfinityPoint)return;throw new Error("bad point: ZERO")}var{x:e,y:t}=this.toAffine();if(!p.isValid(e)||!p.isValid(t))throw new Error("bad point: x or y not FE");t=p.sqr(t),e=n(e);if(!p.eql(t,e))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){var e=this.toAffine()["y"];if(p.isOdd)return!p.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){g(e);var{px:t,py:r,pz:n}=this,{px:e,py:i,pz:s}=e,t=p.eql(p.mul(t,s),p.mul(e,n)),e=p.eql(p.mul(r,s),p.mul(i,n));return t&&e}negate(){return new y(this.px,p.neg(this.py),this.pz)}double(){var e,t,{a:r,b:n}=l,n=p.mul(n,yn),{px:i,py:s,pz:a}=this,o=(p.ZERO,p.ZERO,p.ZERO,p.mul(i,i)),u=p.mul(s,s),h=p.mul(a,a),c=p.mul(i,s),c=p.add(c,c),i=p.mul(i,a);return i=p.add(i,i),e=p.mul(r,i),t=p.mul(n,h),t=p.add(e,t),e=p.sub(u,t),t=p.add(u,t),t=p.mul(e,t),e=p.mul(c,e),i=p.mul(n,i),h=p.mul(r,h),c=p.sub(o,h),c=p.mul(r,c),c=p.add(c,i),i=p.add(o,o),o=p.add(i,o),o=p.add(o,h),o=p.mul(o,c),t=p.add(t,o),h=p.mul(s,a),h=p.add(h,h),o=p.mul(h,c),e=p.sub(e,o),i=p.mul(h,u),i=p.add(i,i),i=p.add(i,i),new y(e,t,i)}add(e){g(e);var{px:t,py:r,pz:n}=this,{px:e,py:i,pz:s}=e,a=(p.ZERO,p.ZERO,p.ZERO,l.a),o=p.mul(l.b,yn),u=p.mul(t,e),h=p.mul(r,i),c=p.mul(n,s),d=p.add(t,r),f=p.add(e,i),d=p.mul(d,f),f=p.add(u,h),t=(d=p.sub(d,f),f=p.add(t,n),p.add(e,s));return f=p.mul(f,t),t=p.add(u,c),f=p.sub(f,t),t=p.add(r,n),e=p.add(i,s),t=p.mul(t,e),e=p.add(h,c),t=p.sub(t,e),r=p.mul(a,f),e=p.mul(o,c),r=p.add(e,r),e=p.sub(h,r),r=p.add(h,r),n=p.mul(e,r),h=p.add(u,u),h=p.add(h,u),c=p.mul(a,c),f=p.mul(o,f),h=p.add(h,c),c=p.sub(u,c),c=p.mul(a,c),f=p.add(f,c),u=p.mul(h,f),n=p.add(n,u),u=p.mul(t,f),e=p.mul(d,e),e=p.sub(e,u),u=p.mul(d,h),r=p.mul(t,r),r=p.add(r,u),new y(e,n,r)}subtract(e){return this.add(e.negate())}is0(){return this.equals(y.ZERO)}wNAF(e){return d.wNAFCached(this,o,e,e=>{const r=p.invertBatch(e.map(e=>e.pz));return e.map((e,t)=>e.toAffine(r[t])).map(y.fromAffine)})}multiplyUnsafe(e){var t=y.ZERO;if(e===P)return t;if(c(e),e===B)return this;var r=l["endo"];if(!r)return d.unsafeLadder(this,e);let{k1neg:n,k1:i,k2neg:s,k2:a}=r.splitScalar(e),o=t,u=t,h=this;for(;i>P||a>P;)i&B&&(o=o.add(h)),a&B&&(u=u.add(h)),h=h.double(),i>>=B,a>>=B;return n&&(o=o.negate()),s&&(u=u.negate()),u=new y(p.mul(u.px,r.beta),u.py,u.pz),o.add(u)}multiply(e){c(e);let t,r,n=e;var i=l["endo"];if(i){const{k1neg:e,k1:l,k2neg:c,k2:h}=i.splitScalar(n);var{p:s,f:a}=this.wNAF(l),{p:o,f:u}=this.wNAF(h),s=d.constTimeNegate(e,s),o=d.constTimeNegate(c,o);o=new y(p.mul(o.px,i.beta),o.py,o.pz),t=s.add(o),r=a.add(u)}else{const{p:e,f:l}=this.wNAF(n);t=e,r=l}return y.normalizeZ([t,r])[0]}multiplyAndAddUnsafe(e,t,r){const n=y.BASE,i=(e,t)=>t!==P&&t!==B&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),s=i(this,t).add(i(e,r));return s.is0()?void 0:s}toAffine(e){var{px:t,py:r,pz:n}=this,i=this.is0(),t=(null==e&&(e=i?p.ONE:p.inv(n)),p.mul(t,e)),r=p.mul(r,e),n=p.mul(n,e);if(i)return{x:p.ZERO,y:p.ZERO};if(p.eql(n,p.ONE))return{x:t,y:r};throw new Error("invZ was invalid")}isTorsionFree(){var{h:e,isTorsionFree:t}=l;if(e===B)return!0;if(t)return t(y,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){var{h:e,clearCofactor:t}=l;return e===B?this:t?t(y,this):this.multiplyUnsafe(l.h)}toRawBytes(e=!0){return this.assertValidity(),t(y,this,e)}toHex(e=!0){return Zr(this.toRawBytes(e))}}y.BASE=new y(l.Gx,l.Gy,p.ONE),y.ZERO=new y(p.ZERO,p.ONE,p.ZERO);const e=l.nBitLength,d=function(g,t){const y=(e,t)=>{var r=t.negate();return e?r:t},m=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:y,unsafeLadder(e,t){let r=g.ZERO,n=e;for(;t>hn;)t&cn&&(r=r.add(n)),n=n.double(),t>>=cn;return r},precomputeWindow(e,t){var{windows:r,windowSize:n}=m(t),i=[];let s=e,a=s;for(let e=0;e<r;e++){a=s,i.push(a);for(let e=1;e<n;e++)a=a.add(s),i.push(a);s=a.double()}return i},wNAF(r,n,i){const{windows:s,windowSize:a}=m(r);let o=g.ZERO,u=g.BASE;var h=BigInt(2**r-1),c=2**r,d=BigInt(r);for(let t=0;t<s;t++){const r=t*a;let e=Number(i&h);i>>=d,e>a&&(e-=c,i+=cn);const s=r,f=r+Math.abs(e)-1,l=t%2!=0,p=e<0;0===e?u=u.add(y(l,n[s])):o=o.add(y(p,n[f]))}return{p:o,f:u}},wNAFCached(e,t,r,n){var i=e._WINDOW_SIZE||1;let s=t.get(e);return s||(s=this.precomputeWindow(e,i),1!==i&&t.set(e,n(s))),this.wNAF(i,s,r)}}}(y,l.endo?Math.ceil(e/2):e);return{CURVE:l,ProjectivePoint:y,normPrivateKeyToScalar:a,weierstrassEquation:n,isWithinCurveOrder:s}}({...l,toBytes(e,t,r){var n=t.toAffine(),i=p.toBytes(n.x),s=Kr;return r?s(Uint8Array.from([t.hasEvenY()?2:3]),i):s(Uint8Array.from([4]),i,p.toBytes(n.y))},fromBytes(t){const r=t.length,n=t[0],i=t.subarray(1);if(r!==a||2!==n&&3!==n){if(r===o&&4===n)return{x:p.fromBytes(i.subarray(0,p.BYTES)),y:p.fromBytes(i.subarray(p.BYTES,2*p.BYTES))};throw new Error(`Point of length ${r} was invalid. Expected ${a} compressed bytes or ${o} uncompressed bytes`)}{const t=f(i);if(!(P<(s=t)&&s<p.ORDER))throw new Error("Point is not on curve");const r=u(t);let e=p.sqrt(r);return{x:t,y:e=1==(1&n)!=((e&B)===B)?p.neg(e):e}}var s}}),i=e=>Zr(Fr(e,l.nByteLength));function w(e){return e>t>>B}const r=(e,t,r)=>f(e.slice(t,r));class x{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){var t=l.nByteLength;return e=O("compactSignature",e,2*t),new x(r(e,0,t),r(e,t,2*t))}static fromDER(e){var{r:e,s:t}=pn.toSig(O("DER",e));return new x(e,t)}assertValidity(){if(!b(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!b(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new x(this.r,this.s,e)}recoverPublicKey(e){var{r:t,s:r,recovery:n}=this,e=E(O("msgHash",e));if(null==n||![0,1,2,3].includes(n))throw new Error("recovery id invalid");t=2===n||3===n?t+l.n:t;if(t>=p.ORDER)throw new Error("recovery id 2 or 3 invalid");n=0==(1&n)?"02":"03",n=m.fromHex(n+i(t)),t=y(t),e=g(-e*t),r=g(r*t),t=m.BASE.multiplyAndAddUnsafe(n,e,r);if(t)return t.assertValidity(),t;throw new Error("point at infinify")}hasHighS(){return w(this.s)}normalizeS(){return this.hasHighS()?new x(this.r,g(-this.s),this.recovery):this}toDERRawBytes(){return Dr(this.toDERHex())}toDERHex(){return pn.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Dr(this.toCompactHex())}toCompactHex(){return i(this.r)+i(this.s)}}e={isValidPrivateKey(e){try{return v(e),!0}catch(e){return!1}},normPrivateKeyToScalar:v,randomPrivateKey:()=>{var e=function(e,t){var r=(e=O("privateHash",e)).length,n=un(t).nByteLength+8;if(n<24||r<n||1024<r)throw new Error(`hashToPrivateScalar: expected ${n}-1024 bytes of input, got `+r);return I(f(e),t-S)+S}(l.randomBytes(p.BYTES+8),t);return Fr(e,l.nByteLength)},precompute:(e=8,t=m.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function n(e){var t=e instanceof Uint8Array,r="string"==typeof e,n=(t||r)&&e.length;return t?n===a||n===o:r?n===2*a||n===2*o:e instanceof m}const _=l.bits2int||function(e){var t=f(e),e=8*e.length-l.nBitLength;return 0<e?t>>BigInt(e):t},E=l.bits2int_modN||function(e){return g(_(e))},s=Vr(l.nBitLength);function A(e){if("bigint"!=typeof e)throw new Error("bigint expected");if(P<=e&&e<s)return Fr(e,l.nByteLength);throw new Error("bigint expected < 2^"+l.nBitLength)}const k={lowS:l.lowS,prehash:!1},h={lowS:l.lowS,prehash:!1};return m.BASE._setWindowSize(8),{CURVE:l,getPublicKey:function(e,t=!0){return m.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,r=!0){if(n(e))throw new Error("first arg must be private key");if(n(t))return m.fromHex(t).multiply(v(e)).toRawBytes(r);throw new Error("second arg must be public key")},sign:function(e,t,r=k){var{seed:e,k2sig:t}=function(e,t,r=k){if(["recovered","canonical"].some(e=>e in r))throw new Error("sign() legacy options not supported");var{hash:n,randomBytes:i}=l;let{lowS:s,prehash:a,extraEntropy:o}=r;null==s&&(s=!0),e=O("msgHash",e),a&&(e=O("prehashed msgHash",n(e)));const u=E(e),h=v(t),c=[A(h),A(u)];if(null!=o){const e=!0===o?i(p.BYTES):o;c.push(O("extraEntropy",e,p.BYTES))}const d=Kr(...c),f=u;return{seed:d,k2sig:function(r){r=_(r);if(b(r)){var n=y(r),r=m.BASE.multiply(r).toAffine(),i=g(r.x);if(i!==P){n=g(n*g(f+i*h));if(n!==P){let e=(r.x===i?0:2)|Number(r.y&B),t=n;return s&&w(n)&&(t=w(r=n)?g(-r):r,e^=1),new x(i,t,e)}}}}}}(e,t,r);return $r(l.hash.outputLen,l.nByteLength,l.hmac)(e,t)},verify:function(e,t,r,n=h){var i=e;if(t=O("msgHash",t),r=O("publicKey",r),"strict"in n)throw new Error("options.strict was renamed to lowS");var{lowS:n,prehash:s}=n;let a,o;try{if("string"==typeof i||i instanceof Uint8Array)try{a=x.fromDER(i)}catch(e){if(!(e instanceof pn.Err))throw e;a=x.fromCompact(i)}else{if("object"!=typeof i||"bigint"!=typeof i.r||"bigint"!=typeof i.s)throw new Error("PARSE");{const{r:e,s:l}=i;a=new x(e,l)}}o=m.fromHex(r)}catch(e){if("PARSE"===e.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(n&&a.hasHighS())return!1;s&&(t=l.hash(t));var{r:i,s:r}=a,n=E(t),s=y(r),t=g(n*s),r=g(i*s),n=m.BASE.multiplyAndAddUnsafe(o,t,r)?.toAffine();return!!n&&g(n.x)===i},ProjectivePoint:m,Signature:x,utils:e}}let bn=class extends t{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,br.hash(e);t=Er(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;var r=this.blockLen,n=new Uint8Array(r);n.set(t.length>r?e.create().update(t).digest():t);for(let e=0;e<n.length;e++)n[e]^=54;this.iHash.update(n),this.oHash=e.create();for(let e=0;e<n.length;e++)n[e]^=106;this.oHash.update(n),n.fill(0)}update(e){return br.exists(this),this.iHash.update(e),this}digestInto(e){br.exists(this),br.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){var e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){var{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:s,outputLen:a}=this;return(e=e||Object.create(Object.getPrototypeOf(this),{})).finished=n,e.destroyed=i,e.blockLen=s,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const wn=(e,t,r)=>new bn(e,t).update(r).digest();wn.create=(e,t)=>new bn(e,t);const xn=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),_n=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),En=BigInt(1),An=BigInt(2),kn=(e,t)=>(e+t/An)/t;function On(e){var t=xn,r=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),a=BigInt(23),o=BigInt(44),u=BigInt(88),h=e*e*e%t,c=h*h*e%t,d=l(c,r,t)*c%t,d=l(d,r,t)*c%t,d=l(d,An,t)*h%t,i=l(d,i,t)*d%t,d=l(i,s,t)*i%t,s=l(d,o,t)*d%t,u=l(s,u,t)*s%t,s=l(u,o,t)*d%t,u=l(s,r,t)*c%t,o=l(u,a,t)*i%t,d=l(o,n,t)*h%t,s=l(d,An,t);if(Sn.eql(Sn.sqr(s),e))return s;throw new Error("Cannot find square root")}const Sn=function(r,e){if(r<=d)throw new Error("Expected Fp ORDER > 0, got "+r);const{nBitLength:t,nByteLength:n}=un(r,void 0);if(2048<n)throw new Error("Field lengths over 2048 bytes are not supported");const i=sn(r),a=Object.freeze({ORDER:r,BITS:t,BYTES:n,MASK:Vr(t),ZERO:d,ONE:S,create:e=>I(e,r),isValid:e=>{if("bigint"!=typeof e)throw new Error("Invalid field element: expected bigint, got "+typeof e);return d<=e&&e<r},is0:e=>e===d,isOdd:e=>(e&S)===S,neg:e=>I(-e,r),eql:(e,t)=>e===t,sqr:e=>I(e*e,r),add:(e,t)=>I(e+t,r),sub:(e,t)=>I(e-t,r),mul:(e,t)=>I(e*t,r),pow:(r,n)=>{{var i=a,s=n;if(s<d)throw new Error("Expected power > 0");if(s===d)return i.ONE;if(s===S)return r;let e=i.ONE,t=r;for(;s>d;)s&S&&(e=i.mul(e,t)),t=i.sqr(t),s>>=S;return e}},div:(e,t)=>I(e*nn(t,r),r),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:e=>nn(e,r),sqrt:e.sqrt||(e=>i(a,e)),invertBatch:e=>{{var n=a;const i=new Array(e.length),t=e.reduce((e,t,r)=>n.is0(t)?e:(i[r]=e,n.mul(e,t)),n.ONE),r=n.inv(t);return e.reduceRight((e,t,r)=>n.is0(t)?e:(i[r]=n.mul(e,i[r]),n.mul(e,t)),r),i}},cmov:(e,t,r)=>r?t:e,toBytes:e=>Fr(e,n),fromBytes:e=>{if(e.length!==n)throw new Error(`Fp.fromBytes: expected ${n}, got `+e.length);return f(e)}});return Object.freeze(a)}(xn,{sqrt:On}),In=(Jr={a:BigInt(0),b:BigInt(7),Fp:Sn,n:_n,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{var t=_n,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-En*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,a=BigInt("0x100000000000000000000000000000000"),o=kn(s*e,t),u=kn(-n*e,t);let h=I(e-o*r-u*i,t),c=I(-o*n-u*s,t);r=h>a,i=c>a;if(r&&(h=t-h),i&&(c=t-c),h>a||c>a)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:r,k1:h,k2neg:i,k2:c}}}},e=Tr,t=e=>{return vn({...Jr,...(r=e,{hash:r,hmac:(e,...t)=>wn(r,e,function(...r){if(!r.every(e=>e instanceof Uint8Array))throw new Error("Uint8Array list expected");if(1===r.length)return r[0];var e=r.reduce((e,t)=>e+t.length,0),n=new Uint8Array(e);for(let e=0,t=0;e<r.length;e++){var i=r[e];n.set(i,t),t+=i.length}return n}(...t)),randomBytes:kr})});var r},Object.freeze({...t(e),create:t})),Pn=BigInt(0),Bn=e=>"bigint"==typeof e&&Pn<e&&e<xn,Tn={};function Un(e,...t){let r=Tn[e];if(void 0===r){const t=Tr(Uint8Array.from(e,e=>e.charCodeAt(0)));r=Kr(t,t),Tn[e]=r}return Tr(Kr(r,...t))}const Cn=e=>e.toRawBytes(!0).slice(1),Nn=e=>Fr(e,32),Ln=e=>I(e,xn),Hn=e=>I(e,_n),Zn=In.ProjectivePoint;function Rn(e){var e=In.utils.normPrivateKeyToScalar(e),t=Zn.fromPrivateKey(e);return{scalar:t.hasEvenY()?e:Hn(-e),bytes:Cn(t)}}function jn(e){if(!Bn(e))throw new Error("bad x: need 0 < x < p");var t=Ln(e*e);let r=On(Ln(t*e+BigInt(7)));r%An!==Pn&&(r=Ln(-r));t=new Zn(e,r,En);return t.assertValidity(),t}function Dn(...e){return Hn(f(Un("BIP0340/challenge",...e)))}function zn(e,t,r){var n,i,s,a,o,u,h=O("signature",e,64),c=O("message",t),d=O("publicKey",r,32);try{const e=jn(f(d)),t=f(h.subarray(0,32));if(!Bn(t))return!1;const r=f(h.subarray(32,64));return"bigint"==typeof(u=r)&&Pn<u&&u<_n?(n=Dn(Nn(t),Cn(e),c),s=e,a=r,o=Hn(-n),!(!(i=Zn.BASE.multiplyAndAddUnsafe(s,a,o))||!i.hasEvenY()||i.toAffine().x!==t)):!1}catch(e){return!1}}const Fn={getPublicKey:function(e){return Rn(e).bytes},sign:function(e,t,r=kr(32)){var e=O("message",e),{bytes:t,scalar:n}=Rn(t),r=O("auxRand",r,32),r=Nn(n^f(Un("BIP0340/aux",r))),r=Un("BIP0340/nonce",r,t,e),r=Hn(f(r));if(r===Pn)throw new Error("sign failed: k is zero");var{bytes:r,scalar:i}=Rn(r),s=Dn(r,t,e),a=new Uint8Array(64);if(a.set(r,0),a.set(Nn(Hn(i+s*n)),32),zn(a,e,t))return a;throw new Error("sign: Invalid signature produced")},verify:zn,utils:{randomPrivateKey:In.utils.randomPrivateKey,lift_x:jn,pointToBytes:Cn,numberToBytesBE:Fr,bytesToNumberBE:f,taggedHash:Un,mod:I}};(function(){const e=[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(e=>BigInt(e))).map(e=>Array.from(e).reverse())})(Sn),function(e,t){if(on(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const r=function(u,e){const i=u.ORDER;let s=P;for(let e=i-B;e%gn===P;e/=gn)s+=B;const h=s,t=(i-B)/gn**h,c=(t-B)/gn,d=gn**h-B,f=gn**(h-B),l=u.pow(e,t),p=u.pow(e,(t+B)/gn);let r=(e,t)=>{let r=l,n=u.pow(t,d),i=u.sqr(n);i=u.mul(i,t);var s=u.mul(e,i),s=u.pow(s,c);s=u.mul(s,n),n=u.mul(s,t),i=u.mul(s,e);let a=u.mul(i,n);s=u.pow(a,f);t=u.eql(s,u.ONE);n=u.mul(i,p),s=u.mul(a,r),i=u.cmov(n,i,t),a=u.cmov(s,a,t);for(let e=h;1<e;e--){var o=gn**(e-gn),o=u.pow(a,o);const c=u.eql(o,u.ONE);n=u.mul(i,r),r=u.mul(r,r),o=u.mul(a,r),i=u.cmov(n,i,c),a=u.cmov(o,a,c)}return{isValid:t,value:i}};if(u.ORDER%mn===yn){const i=(u.ORDER-yn)/mn,s=u.sqrt(u.neg(e));r=(e,t)=>{var r=u.sqr(t),n=u.mul(e,t),r=u.mul(r,n),r=u.pow(r,i),r=u.mul(r,n),n=u.mul(r,s),t=u.mul(u.sqr(r),t),t=u.eql(t,e);return{isValid:t,value:u.cmov(n,r,t)}}}return r}(e,t.Z);if(e.isOdd)return;throw new Error("Fp.isOdd is not implemented!")}(Sn,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:Sn.create(BigInt("-11"))});function qn(e){let t,r=0;const n=e.reduce((e,t)=>e+t.length,0),i=new Uint8Array(n);for(const n of e)for(t=0;t<n.length;r++,t++)i[r]=n[t];return i}function Kn(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("Wrong positive integer: "+e)}function Vn(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0<t.length&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=`+e.length)}In.ProjectivePoint,Sn.ORDER,Tr;var Mn={number:Kn,bool:function(e){if("boolean"!=typeof e)throw new Error("Expected boolean, not "+e)},bytes:Vn,hash:function(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");Kn(e.outputLen),Kn(e.blockLen)},exists:function(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")},output:function(e,t){Vn(e);t=t.outputLen;if(e.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}};const Gn="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,$n=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Wn=(e,t)=>e<<32-t|e>>>t;if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");function Yn(e){if((e="string"==typeof e?function(e){if("string"!=typeof e)throw new TypeError("utf8ToBytes expected string, got "+typeof e);return(new TextEncoder).encode(e)}(e):e)instanceof Uint8Array)return e;throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`)}Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));e=class{clone(){return this._cloneInto()}};function Jn(t){var e=e=>t().update(Yn(e)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}class Qn extends e{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=$n(this.buffer)}update(t){Mn.exists(this);const{view:r,buffer:n,blockLen:i}=this,s=(t=Yn(t)).length;for(let e=0;e<s;){var a=Math.min(i-this.pos,s-e);if(a!==i)n.set(t.subarray(e,e+a),this.pos),this.pos+=a,e+=a,this.pos===i&&(this.process(r,0),this.pos=0);else{const r=$n(t);for(;i<=s-e;e+=i)this.process(r,e)}}return this.length+=t.length,this.roundClean(),this}digestInto(e){Mn.exists(this),Mn.output(e,this),this.finished=!0;var t,r,n,i,s,{buffer:a,view:o,blockLen:u,isLE:h}=this;let c=this["pos"];a[c++]=128,this.buffer.subarray(c).fill(0),this.padOffset>u-c&&(this.process(o,0),c=0);for(let e=c;e<u;e++)a[e]=0;t=o,r=u-8,n=BigInt(8*this.length),i=h,"function"==typeof t.setBigUint64?t.setBigUint64(r,n,i):(f=BigInt(32),s=BigInt(4294967295),f=Number(n>>f&s),n=Number(n&s),s=i?0:4,t.setUint32(r+(i?4:0),f,i),t.setUint32(r+s,n,i)),this.process(o,0);var d=$n(e),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");var l=f/4,p=this.get();if(l>p.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)d.setUint32(4*e,p[e],h)}digest(){var{buffer:e,outputLen:t}=this,e=(this.digestInto(e),e.slice(0,t));return this.destroy(),e}_cloneInto(e){(e=e||new this.constructor).set(...this.get());var{blockLen:t,buffer:r,length:n,finished:i,destroyed:s,pos:a}=this;return e.length=n,e.pos=a,e.finished=i,e.destroyed=s,n%t&&e.buffer.set(r),e}}const Xn=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ei=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ti=new Uint32Array(64);class ri extends Qn{constructor(){super(64,32,8,!1),this.A=0|ei[0],this.B=0|ei[1],this.C=0|ei[2],this.D=0|ei[3],this.E=0|ei[4],this.F=0|ei[5],this.G=0|ei[6],this.H=0|ei[7]}get(){var{A:e,B:t,C:r,D:n,E:i,F:s,G:a,H:o}=this;return[e,t,r,n,i,s,a,o]}set(e,t,r,n,i,s,a,o){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|s,this.G=0|a,this.H=0|o}process(t,r){for(let e=0;e<16;e++,r+=4)ti[e]=t.getUint32(r,!1);for(let e=16;e<64;e++){const r=ti[e-15],n=ti[e-2],i=Wn(r,7)^Wn(r,18)^r>>>3,s=Wn(n,17)^Wn(n,19)^n>>>10;ti[e]=s+ti[e-7]+i+ti[e-16]|0}let{A:n,B:i,C:s,D:a,E:o,F:u,G:h,H:c}=this;for(let e=0;e<64;e++){const r=c+(Wn(o,6)^Wn(o,11)^Wn(o,25))+((l=o)&u^~l&h)+Xn[e]+ti[e]|0,p=(Wn(n,2)^Wn(n,13)^Wn(n,22))+(l=n,d=i,f=s,l&d^l&f^d&f)|0;c=h,h=u,u=o,o=a+r|0,a=s,s=i,i=n,n=r+p|0}var d,f,l;n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,a=a+this.D|0,o=o+this.E|0,u=u+this.F|0,h=h+this.G|0,c=c+this.H|0,this.set(n,i,s,a,o,u,h,c)}roundClean(){ti.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class ni extends ri{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const ii=Jn(()=>new ri),si=(Jn(()=>new ni),BigInt(2**32-1)),ai=BigInt(32);function oi(e,t=!1){return t?{h:Number(e&si),l:Number(e>>ai&si)}:{h:0|Number(e>>ai&si),l:0|Number(e&si)}}var u,ui,s,a,hi=(e,t,r)=>e>>>r,ci=(e,t,r)=>e<<32-r|t>>>r,di=(e,t,r)=>e>>>r|t<<32-r,fi=(e,t,r)=>e<<32-r|t>>>r,li=(e,t,r)=>e<<64-r|t>>>r-32,pi=(e,t,r)=>e>>>r-32|t<<64-r,gi=function(e,t,r,n){t=(t>>>0)+(n>>>0);return{h:e+r+(t/2**32|0)|0,l:0|t}},yi=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),mi=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,vi=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),bi=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,wi=(e,t,r,n,i,s)=>t+r+n+i+s+(e/2**32|0)|0,xi=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0);const[_i,Ei]=function(t,r=!1){var n=new Uint32Array(t.length),i=new Uint32Array(t.length);for(let e=0;e<t.length;e++){var{h:s,l:a}=oi(t[e],r);[n[e],i[e]]=[s,a]}return[n,i]}(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Ai=new Uint32Array(80),ki=new Uint32Array(80);class Oi extends Qn{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){var{Ah:e,Al:t,Bh:r,Bl:n,Ch:i,Cl:s,Dh:a,Dl:o,Eh:u,El:h,Fh:c,Fl:d,Gh:f,Gl:l,Hh:p,Hl:g}=this;return[e,t,r,n,i,s,a,o,u,h,c,d,f,l,p,g]}set(e,t,r,n,i,s,a,o,u,h,c,d,f,l,p,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|n,this.Ch=0|i,this.Cl=0|s,this.Dh=0|a,this.Dl=0|o,this.Eh=0|u,this.El=0|h,this.Fh=0|c,this.Fl=0|d,this.Gh=0|f,this.Gl=0|l,this.Hh=0|p,this.Hl=0|g}process(t,r){for(let e=0;e<16;e++,r+=4)Ai[e]=t.getUint32(r),ki[e]=t.getUint32(r+=4);for(let e=16;e<80;e++){const r=0|Ai[e-15],n=0|ki[e-15],i=di(r,n,1)^di(r,n,8)^hi(r,n,7),s=fi(r,n,1)^fi(r,n,8)^ci(r,n,7),a=0|Ai[e-2],o=0|ki[e-2],u=di(a,o,19)^li(a,o,61)^hi(a,o,6),h=fi(a,o,19)^pi(a,o,61)^ci(a,o,6),c=vi(s,h,ki[e-7],ki[e-16]),d=bi(c,i,u,Ai[e-7],Ai[e-16]);Ai[e]=0|d,ki[e]=0|c}let{Ah:n,Al:i,Bh:s,Bl:a,Ch:o,Cl:u,Dh:h,Dl:c,Eh:d,El:f,Fh:l,Fl:p,Gh:g,Gl:y,Hh:m,Hl:v}=this;for(let e=0;e<80;e++){const r=di(d,f,14)^di(d,f,18)^li(d,f,41),w=fi(d,f,14)^fi(d,f,18)^pi(d,f,41),x=d&l^~d&g,_=f&p^~f&y,E=xi(v,w,_,Ei[e],ki[e]),A=wi(E,m,r,x,_i[e],Ai[e]),k=0|E,O=di(n,i,28)^li(n,i,34)^li(n,i,39),S=fi(n,i,28)^pi(n,i,34)^pi(n,i,39),I=n&s^n&o^s&o,P=i&a^i&u^a&u;m=0|g,v=0|y,g=0|l,y=0|p,l=0|d,p=0|f,{h:d,l:f}=gi(0|h,0|c,0|A,0|k),h=0|o,c=0|u,o=0|s,u=0|a,s=0|n,a=0|i;var b=yi(k,S,P);n=mi(b,A,O,I),i=0|b}({h:n,l:i}=gi(0|this.Ah,0|this.Al,0|n,0|i)),{h:s,l:a}=gi(0|this.Bh,0|this.Bl,0|s,0|a),{h:o,l:u}=gi(0|this.Ch,0|this.Cl,0|o,0|u),{h,l:c}=gi(0|this.Dh,0|this.Dl,0|h,0|c),{h:d,l:f}=gi(0|this.Eh,0|this.El,0|d,0|f),{h:l,l:p}=gi(0|this.Fh,0|this.Fl,0|l,0|p),{h:g,l:y}=gi(0|this.Gh,0|this.Gl,0|g,0|y),{h:m,l:v}=gi(0|this.Hh,0|this.Hl,0|m,0|v),this.set(n,i,s,a,o,u,h,c,d,f,l,p,g,y,m,v)}roundClean(){Ai.fill(0),ki.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class Si extends Oi{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class Ii extends Oi{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class Pi extends Oi{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}const Bi=Jn(()=>new Oi),Ti=(Jn(()=>new Si),Jn(()=>new Ii),Jn(()=>new Pi),new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8])),Ui=Uint8Array.from({length:16},(e,t)=>t),Ci=Ui.map(e=>(9*e+5)%16);let Ni=[Ui],Li=[Ci];for(let e=0;e<4;e++)for(var Hi of[Ni,Li])Hi.push(Hi[e].map(e=>Ti[e]));const Zi=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>new Uint8Array(e)),Ri=Ni.map((e,t)=>e.map(e=>Zi[t][e])),ji=Li.map((e,t)=>e.map(e=>Zi[t][e])),Di=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),zi=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),Fi=(e,t)=>e<<t|e>>>32-t;function qi(e,t,r,n){return 0===e?t^r^n:1===e?t&r|~t&n:2===e?(t|~r)^n:3===e?t&n|r&~n:t^(r|~n)}const Ki=new Uint32Array(16);class Vi extends Qn{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){var{h0:e,h1:t,h2:r,h3:n,h4:i}=this;return[e,t,r,n,i]}set(e,t,r,n,i){this.h0=0|e,this.h1=0|t,this.h2=0|r,this.h3=0|n,this.h4=0|i}process(t,r){for(let e=0;e<16;e++,r+=4)Ki[e]=t.getUint32(r,!0);let n=0|this.h0,i=n,s=0|this.h1,a=s,o=0|this.h2,u=o,h=0|this.h3,c=h,d=0|this.h4,f=d;for(let t=0;t<5;t++){const r=4-t,l=Di[t],p=zi[t],g=Ni[t],y=Li[t],m=Ri[t],v=ji[t];for(let e=0;e<16;e++){const i=Fi(n+qi(t,s,o,h)+Ki[g[e]]+l,m[e])+d|0;n=d,d=h,h=0|Fi(o,10),o=s,s=i}for(let e=0;e<16;e++){const n=Fi(i+qi(r,a,u,c)+Ki[y[e]]+p,v[e])+f|0;i=f,f=c,c=0|Fi(u,10),u=a,a=n}}this.set(this.h1+o+c|0,this.h2+h+f|0,this.h3+d+i|0,this.h4+n+a|0,this.h0+s+u|0)}roundClean(){Ki.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const Mi=Jn(()=>new Vi);class Gi extends e{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,Mn.hash(e);t=Yn(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;var r=this.blockLen,n=new Uint8Array(r);n.set(t.length>r?e.create().update(t).digest():t);for(let e=0;e<n.length;e++)n[e]^=54;this.iHash.update(n),this.oHash=e.create();for(let e=0;e<n.length;e++)n[e]^=106;this.oHash.update(n),n.fill(0)}update(e){return Mn.exists(this),this.iHash.update(e),this}digestInto(e){Mn.exists(this),Mn.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){var e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){var{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:s,outputLen:a}=this;return(e=e||Object.create(Object.getPrototypeOf(this),{})).finished=n,e.destroyed=i,e.blockLen=s,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const $i=(e,t,r)=>new Gi(e,t).update(r).digest(),Wi=($i.create=(e,t)=>new Gi(e,t),new TextEncoder),Yi=new TextDecoder;function Ji(e){return Wi.encode(e)}function Qi(e){var t=new Uint8Array(e.length/2);let r,n=0;if(null!==e.match(/[^a-fA-f0-9]/))throw new TypeError("Invalid hex string: "+e);if(0<e.length%2)throw new Error("Hex string length is uneven: "+e.length);for(r=0;r<e.length;r+=2)t[n]=parseInt(e.slice(r,r+2),16),n+=1;return t}function Xi(e){if(0===e)return Uint8Array.of(0);for(var t=[];0<e;){var r=255&e;t.push(r),e=(e-r)/256}return new Uint8Array(t)}function es(e){var t=new Array(8*e.length);let r=0;for(const n of e){if(255<n)throw new Error(`Invalid byte value: ${n}. Byte values must be between 0 and 255.`);for(let e=7;0<=e;e--,r++)t[r]=n>>e&1}return t}function ts(e){if(0n===e)return Uint8Array.of(0);for(var t=[];0n<e;){var r=0xffn&e;t.push(Number(r)),e=(e-r)/256n}return new Uint8Array(t)}function rs(e){return Yi.decode(e)}function ns(t){var r=new Array(t.length);for(let e=0;e<t.length;e++)r.push(t[e].toString(16).padStart(2,"0"));return r.join("")}function o(e,t=!0){if(e instanceof ArrayBuffer)return new Uint8Array(e);if(e instanceof Uint8Array)return new Uint8Array(e);switch(typeof e){case"bigint":return ts(e);case"boolean":return Uint8Array.of(e?1:0);case"number":return Xi(e);case"string":return t?Qi(e):Wi.encode(e);default:throw TypeError("Unsupported format:"+String(typeof e))}}function is(e){return ii(ii(o(e)))}const ss={sha256:function(e){return ii(o(e))},sha512:function(e){return Bi(o(e))},ripe160:function(e){return Bi(o(e))},hash256:is,hash160:function(e){return Mi(ii(o(e)))},hmac256:function(e,t){return $i(ii,o(e),o(t))},hmac512:function(e,t){return $i(Bi,o(e),o(t))}},as=new TextEncoder,os=[{name:"base58",charset:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}];function us(e){for(const t of os)if(t.name===e)return t.charset;throw TypeError("Charset does not exist: "+e)}const hs={encode:function(e,t,r=!1){"string"==typeof e&&(e=as.encode(e));var n=us(t),i=n.length,s=[];let a,o,u,h="",c=0;for(a=0;a<e.length;a++)for(c=0,o=e[a],h+=0<o||0<(h.length^a)?"":"1";c in s||0<o;)u=0<(u=s[c])?256*u+o:o,o=u/i|0,s[c]=u%i,c++;for(;0<c--;)h+=n[s[c]];return r&&0<h.length%4?h+"=".repeat(4-h.length%4):h},decode:function(e,t){var r=us(t),n=r.length,i=[],s=[];e=e.replace("=","");let a,o,u,h=0;for(a=0;a<e.length;a++){if(h=0,(o=r.indexOf(e[a]))<0)throw new Error("Character range out of bounds: "+o);for(0<o||0<(s.length^a)||s.push(0);h in i||0<o;)u=0<(u=i[h])?u*n+o:o,o=u>>8,i[h]=u%256,h++}for(;0<h--;)s.push(i[h]);return new Uint8Array(s)}},cs="qpzry9x8gf2tvdw0s3jn54khce6mua7l",ds=[996825010,642813549,513874426,1027748829,705979059],fs=[{version:0,name:"bech32",const:1},{version:1,name:"bech32m",const:734539939}];function ls(t){let r=1;for(let e=0;e<t.length;++e){var n=r>>25;r=(33554431&r)<<5^t[e];for(let e=0;e<5;++e)0!=(n>>e&1)&&(r^=ds[e])}return r}function ps(e){var t=[];let r;for(r=0;r<e.length;++r)t.push(e.charCodeAt(r)>>5);for(t.push(0),r=0;r<e.length;++r)t.push(31&e.charCodeAt(r));return t}function gs(e,t,r,n=!0){var i=[];let s=0,a=0;var o=(1<<r)-1,u=(1<<t+r-1)-1;for(const n of e){if(n<0||0<n>>t)throw new Error("Failed to perform base conversion. Invalid value: "+String(n));for(s=(s<<t|n)&u,a+=t;a>=r;)a-=r,i.push(s>>a&o)}if(n)0<a&&i.push(s<<r-a&o);else if(a>=t||0<(s<<r-a&o))throw new Error("Failed to perform base conversion. Invalid Size!");return i}function ys(t){if(!function(e){let t,r,n=!1,i=!1;for(t=0;t<e.length;++t){if((r=e.charCodeAt(t))<33||126<r)return;97<=r&&r<=122&&(n=!0),65<=r&&r<=90&&(i=!0)}return!n||!i}(t))throw new Error("Encoded string goes out of bounds!");if(i=t=t.toLowerCase(),(s=i.lastIndexOf("1"))<1||s+7>i.length||90<i.length)throw new Error("Encoded string has invalid separator!");const r=[],n=t.lastIndexOf("1"),e=t.substring(0,n);for(let e=n+1;e<t.length;++e){const n=cs.indexOf(t.charAt(e));if(-1===n)throw new Error("Character idx out of bounds: "+String(e));r.push(n)}var i,s=fs.find(e=>e.version===r[0])??fs[0];if(i=r,s=s,ls(ps(e).concat(i))!==s.const)throw new Error("Checksum verification failed!");return[e,r.slice(0,r.length-6)]}function ms(e){var t=(e=e.toLowerCase()).split("1",1)[0],[e,r]=ys(e),n=gs(r.slice(1),5,8,!1),i=n.length;switch(!0){case t!==e:throw new Error("Returned hrp string is invalid.");case null===n||i<2||40<i:throw new Error("Decoded string is invalid or out of spec.");case 16<r[0]:throw new Error("Returned version bit is out of range.");default:return Uint8Array.from(n)}}const vs={encode:function(e,t="bc",r=0){t=function(i,e,t){var r=e.concat(function(e,t){var r=ls(ps(i).concat(e).concat([0,0,0,0,0,0]))^t.const,n=[];for(let e=0;e<6;++e)n.push(r>>5*(5-e)&31);return n}(e,t));let n=i+"1";for(let e=0;e<r.length;++e)n+=cs.charAt(r[e]);return n}(t,[r,...gs([...e],8,5)],fs.find(e=>e.version===r)??fs[0]);return ms(t),t},decode:ms,version:function(e){var[,e]=ys(e=e.toLowerCase());return e[0]}},bs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ws="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",xs=new TextEncoder;function _s(t,e=!1){"string"==typeof t&&(t=xs.encode(t));var r=e?ws:bs;let n="",i=0,s=0;for(let e=0;e<t.length;e++)for(s=s<<8|t[e],i+=8;6<=i;)i-=6,n+=r[s>>i&63];if(0<i)for(s<<=6-i,n+=r[63&s];i<6;)n+=e?"":"=",i+=2;return n}function Es(e,t=!1){var r=(t||e.includes("-")||e.includes("_")?ws:bs).split(""),n=(e=e.replace(/=+$/,"")).split("");let i=0,s=0;var a=[];for(let e=0;e<n.length;e++){const t=n[e],o=r.indexOf(t);if(-1===o)throw new Error("Invalid character: "+t);i+=6,s=s<<6|o,8<=i&&(i-=8,a.push(s>>>i&255))}return new Uint8Array(a)}const As={encode:_s,decode:Es};class c extends Uint8Array{static{this.num=(e,t,r="le")=>{e=new c(Xi(e),t);return"le"===r?e.reverse():e}}static{this.big=(e,t,r="le")=>{e=new c(ts(e),t);return"le"===r?e.reverse():e}}static{this.bin=(e,t)=>new c(function(n){if("string"==typeof n)n=n.split("").map(Number);else if(!Array.isArray(n))throw new Error("Invalid input type: expected a string or an array of numbers.");if(n.length%8!=0)throw new Error("Binary array is invalid length: "+n.length);var i=new Uint8Array(n.length/8);for(let r=0,e=0;r<n.length;r+=8,e++){let t=0;for(let e=0;e<8;e++)t|=n[r+e]<<7-e;i[e]=t}return i}(e),t)}static{this.any=(e,t)=>new c(o(e,!1),t)}static{this.raw=(e,t)=>new c(e,t)}static{this.str=(e,t)=>new c(Ji(e),t)}static{this.hex=(e,t)=>new c(Qi(e),t)}static{this.json=e=>new c(Ji(JSON.stringify(e)))}static{this.bytes=(e,t)=>new c(o(e,!0),t)}static{this.base64=e=>new c(As.decode(e))}static{this.b64url=e=>{return new c(Es(e,!0))}}static{this.bech32=e=>new c(vs.decode(e))}static{this.b58chk=e=>new c((e=>{var t=(e=hs.decode(e,"base58")).slice(0,-4),e=e.slice(-4);if(is(t).slice(0,4).toString()!==e.toString())throw new Error("Invalid checksum!");return t})(e))}constructor(e,t){return e=o(e,!0),"number"==typeof t&&((t=new Uint8Array(t).fill(0)).set(new Uint8Array(e)),e=t.buffer),super(e),this}get arr(){return[...this]}get num(){return this.toNum()}get big(){return this.toBig()}get str(){return this.toStr()}get hex(){return this.toHex()}get raw(){return new Uint8Array(this)}get bits(){return this.toBits()}get bin(){return this.toBin()}get b58chk(){return this.tob58chk()}get base64(){return this.toBase64()}get b64url(){return this.toB64url()}get digest(){return this.toHash()}get id(){return this.toHash().hex}get stream(){return new ks(this)}toNum(r="le"){{var n="le"===r?this.reverse():this;let e,t=0;for(e=n.length-1;0<=e;e--)t=256*t+n[e];return Number(t)}}toBig(r="le"){{var n="le"===r?this.reverse():this;let e,t=0n;for(e=n.length-1;0<=e;e--)t=256n*t+BigInt(n[e]);return BigInt(t)}}toHash(e="sha256"){switch(e){case"sha256":return new c(ss.sha256(this));case"hash256":return new c(ss.hash256(this));case"ripe160":return new c(ss.ripe160(this));case"hash160":return new c(ss.hash160(this));default:throw new Error("Unrecognized format:"+String(e))}}toHmac(e,t="hmac256"){switch(t){case"hmac256":return new c(ss.hmac256(e,this));case"hmac512":return new c(ss.hmac512(e,this));default:throw new Error("Unrecognized format:"+String(t))}}toStr(){return rs(this)}toHex(){return ns(this)}toJson(){return JSON.parse(rs(this))}toBytes(){return new Uint8Array(this)}toBits(){return es(this)}toBin(){return es(this).join("")}tob58chk(){var e=this;return e=qn([e,is(e).slice(0,4)]),hs.encode(e,"base58")}toB64url(){return _s(this,!0)}toBase64(){return As.encode(this)}toBech32(e,t=0){return vs.encode(this,e,t)}prepend(e){return c.join([c.bytes(e),this])}append(e){return c.join([this,c.bytes(e)])}slice(e,t){return new c(new Uint8Array(this).slice(e,t))}subarray(e,t){return new c(new Uint8Array(this).subarray(e,t))}reverse(){return new c(new Uint8Array(this).reverse())}write(e,t){this.set(e,t)}prefixSize(e){e=c.varInt(this.length,e);return c.join([e,this])}static from(e){return new c(Uint8Array.from(e))}static of(...e){return new c(Uint8Array.of(...e))}static join(e){e=e.map(e=>c.bytes(e));return new c(qn(e))}static varInt(e,t){if(e<253)return c.num(e,1);if(e<65536)return c.of(253,...c.num(e,2,t));if(e<4294967296)return c.of(254,...c.num(e,4,t));if(BigInt(e)<0x10000000000000000n)return c.of(255,...c.num(e,8,t));throw new Error("Value is too large: "+e)}static{this.encode=Ji}static{this.decode=rs}static random(e=32){return new c(function(e=32){if(Gn&&"function"==typeof Gn.getRandomValues)return Gn.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}(e),e)}static normalize(e,t){return new c(o(e,!0),t)}static hexify(e){return ns(o(e,!0))}static serialize(e,t){return new c(function(e){if("object"==typeof e){if(e instanceof Uint8Array)return e;try{return Ji(JSON.stringify(e))}catch{throw TypeError("Object is not serializable.")}}return o(e,!1)}(e),t)}static revive(e){if("string"==typeof(e=e instanceof Uint8Array?rs(e):e))try{return JSON.parse(e)}catch{}return e}}class ks{constructor(e){this.data=new Uint8Array(e),this.size=this.data.length}peek(e){if(e>this.size)throw new Error(`Size greater than stream: ${e} > `+this.size);return new c(this.data.slice(0,e).buffer)}read(e){e=e??this.readSize();var t=this.peek(e);return this.data=this.data.slice(e),this.size=this.data.length,t}readSize(e){var t=this.read(1).num;switch(!0){case 0<=t&&t<253:return t;case 253===t:return this.read(2).toNum(e);case 254===t:return this.read(4).toNum(e);case 255===t:return this.read(8).toNum(e);default:throw new Error("Varint is out of range: "+t)}}}const Os=In["ProjectivePoint"];class p extends Uint8Array{static{this.N=In.CURVE.n}static mod(e,t=p.N){return Fn.utils.mod(e,t)}static pow(e,t,r=p.N){if(e=p.mod(e,r),t=p.mod(t,r),0n===e)return 0n;let n=1n;for(;0n<t;)1n===(1n&t)&&(n=p.mod(n*e,r)),t>>=1n,e=p.mod(e*e,r);return n}static normalize(e){return e=Ss(e),e=p.mod(e),p.validate(e),c.big(e,32)}static validate(e){return In.utils.isValidPrivateKey(e)}constructor(e){super(p.normalize(e),32)}get buff(){return new c(this)}get raw(){return this.buff.raw}get big(){return this.buff.big}get hex(){return this.buff.hex}get point(){return this.generate()}get xpoint(){return new g(this.point.x)}get hasOddY(){return this.point.hasOddY}get negated(){return this.hasOddY?this.negate():this}gt(e){return new p(e).big>this.big}lt(e){return new p(e).big<this.big}eq(e){return new p(e).big===this.big}ne(e){return new p(e).big!==this.big}add(e){e=new p(e);return new p(this.big+e.big)}sub(e){e=new p(e);return new p(this.big-e.big)}mul(e){e=new p(e);return new p(this.big*e.big)}pow(e,t=p.N-1n){e=new p(e),e=p.mod(e.big,t);return new p(this.big**e)}div(e){e=new p(e),e=this.pow(e.big,p.N-2n);return new p(this.big*e.big)}negate(){return new p(p.N-this.big)}generate(){return g.import(Os.BASE.multiply(this.big))}}class g{static{this.N=In.CURVE.n}static validate(e){try{return new g(e),!0}catch{return!1}}static normalize(e){let t=function(e){if(e instanceof p||e instanceof g)return e.buff;if(e instanceof Uint8Array||"string"==typeof e||"number"==typeof e||"bigint"==typeof e)return c.bytes(e);throw TypeError("Invalid input type:"+typeof e)}(e);return 32===t.length&&(t=t.prepend(2)),Os.fromHex(t.hex)}static generate(e){return new p(e).generate()}static import(e){e=e instanceof g?{x:e.x.big,y:e.y.big}:{x:e.x,y:e.y};return new g(e.x,e.y)}constructor(e,t){this.__p="bigint"==typeof e&&"bigint"==typeof t?new Os(e,t,1n):g.normalize(e),this.p.assertValidity()}get p(){return this.__p}get x(){return c.big(this.p.x,32)}get y(){return c.big(this.p.y,32)}get buff(){return c.raw(this.p.toRawBytes(!0))}get raw(){return this.buff.raw}get hex(){return this.buff.hex}get hasEvenY(){return this.p.hasEvenY()}get hasOddY(){return!this.p.hasEvenY()}eq(e){return e instanceof g?this.p.equals(new Os(e.x.big,e.y.big,1n)):e instanceof Uint8Array?this.x.big===c.raw(e).big:"number"==typeof e?BigInt(e)===this.x.big:e===this.x.big}add(e){return e instanceof g?g.import(this.p.add(e.p)):g.import(this.p.add(g.generate(e).p))}sub(e){return e instanceof g?g.import(this.p.subtract(e.p)):g.import(this.p.subtract(g.generate(e).p))}mul(e){return e instanceof g?g.import(this.p.multiply(e.x.big)):g.import(this.p.multiply(Ss(e)))}negate(){return g.import(this.p.negate())}}function Ss(e){if(e instanceof p)return e.big;if(e instanceof g)return e.x.big;if(e instanceof Uint8Array)return c.raw(e).big;if("string"==typeof e)return c.hex(e).big;if("number"==typeof e)return c.num(e).big;if("bigint"==typeof e)return BigInt(e);throw TypeError("Invalid input type:"+typeof e)}function Is(e){e=c.bytes(e);if(33===e.length)return e.slice(1,33);if(32===e.length)return e;throw new Error("Invalid key length: "+String(e.length))}function Ps(e,t,r="taproot"){var n=c.bytes(t).raw,i=c.bytes(e).raw;switch(r){case"ecdsa":return In.sign(n,i).toDERRawBytes();case"taproot":return Fn.sign(n,i);default:throw new Error("Unknown signature type:"+String(r))}}function Bs(e,t,r,n="taproot"){var i=c.bytes(e).raw,s=c.bytes(t).raw,a=c.bytes(r).raw;switch(n){case"ecdsa":return In.verify(i,s,a);case"taproot":return Fn.verify(i,s,Is(a));default:throw new Error("Unknown signature type:"+String(n))}}const Ts={type:"ecdsa"};class b extends Uint8Array{static random(e){return new b(c.random(32),e)}constructor(e,t={}){super(new p(e)),this.config={...Ts,...t},this.xonly="taproot"===this.config.type}get buff(){return new c(this)}get raw(){return this.buff.raw}get hex(){return this.buff.hex}get field(){return new p(this)}get point(){return this.field.point}get pub(){return new Us(this.point.raw,this.config)}get hasEvenY(){return this.point.hasEvenY}get hasOddY(){return this.point.hasOddY}get xfilter(){return this.xonly&&this.hasOddY?this.negate():this}add(e){var t=this.xfilter.field;return new b(t.add(e),this.config)}sub(e){var t=this.xfilter.field;return new b(t.sub(e),this.config)}mul(e){var t=this.xfilter.field;return new b(t.mul(e),this.config)}div(e){var t=this.xfilter.field;return new b(t.div(e),this.config)}pow(e){var t=this.xfilter.field;return new b(t.pow(e),this.config)}negate(){return new b(this.field.negate(),this.config)}sign(e,t=this.config.type){return Ps(this.raw,e,t)}verify(e,t,r=this.config.type){return Bs(e,t,this.pub.raw,r)}toWIF(e=128){return c.join([e,this,1]).b58chk}}class Us extends Uint8Array{static random(e){return b.random(e).pub}static fromSecret(e,t){return new b(e,t).pub}static{this.xfilter=Is}constructor(e,t={}){var r={...Ts,...t};"taproot"===r.type?super(Us.xfilter(e),32):super(c.bytes(e),33),this.config={...Ts,...t},this.xonly="taproot"===r.type}get buff(){return this.xonly?this.x:new c(this)}get raw(){return this.buff.raw}get hex(){return this.buff.hex}get point(){return new g(this)}get x(){return this.point.x}get y(){return this.point.y}get hasEvenY(){return this.point.hasEvenY}get hasOddY(){return this.point.hasOddY}add(e){return new Us(this.point.add(e).raw,this.config)}sub(e){return new Us(this.point.sub(e).raw,this.config)}mul(e){return new Us(this.point.mul(e).raw,this.config)}negate(){return new Us(this.point.negate().raw,this.config)}verify(e,t,r=this.config.type){return Bs(e,t,this.raw,r)}}const Cs={hash:yr,sign:function(e,t,r,n={}){var{sigflag:i=1}=n,e=Ps(e,yr(t,r,n),"ecdsa");return y.join([e,i])},verify:function(e,t,r={}){var e=v.fmt.toJson(e),{throws:n=!1}=r,{witness:i=[]}=e.vin[t],{script:s,params:a}=v.util.readWitness(i);let o=null;if(a.length<1)return h("Invalid witness data: "+String(i),n);if(void 0===r.script&&null!==s&&(r.script=s),void 0!==r.pubkey)o=y.bytes(r.pubkey);else{if(!(1<a.length&&33===a[1].length))return h("No pubkey provided!",n);o=y.bytes(a[1])}i=m.fmt.toParam(a[0]),s=i.slice(0,-1),a=i.slice(-1)[0],i=yr(e,t,{...r,sigflag:a});return!!Bs(s.hex,i.hex,o.hex,"ecdsa")||h("Invalid signature!",n)}},Ns=[0,1,2,3,129,130,131];function Ls(r,e,t={}){var{extension:t,sigflag:n=0,extflag:i=0,key_version:s=0,separator_pos:a=4294967295}=t,{version:r,vin:o,vout:u,locktime:h}=v.fmt.toJson(r);if(e>=o.length)throw new Error("Index out of bounds: "+String(e));if(!Ns.includes(n))throw new Error("Invalid hash type: "+String(n));if(i<0||127<i)throw new Error("Extention flag out of range: "+String(i));var{txid:c,vout:d,sequence:f,witness:l=[]}=o[e],p=128==(128&n),l=function(t){if(void 0!==t&&!(t.length<2)){let e=t.at(-1);return(e="string"==typeof e?y.hex(e):e)instanceof Uint8Array&&80===e[0]?y.raw(e).prefixSize("be").digest:void 0}}(l),i=2*(i+(void 0!==t?1:0))+(void 0!==l?1:0),g=y.str("TapSighash").digest,g=[g,g,y.num(0,1),y.num(n,1),Jt(r),rr(h)];if(!p){const r=o.map(e=>Hs(e));g.push(function(){var e,t,r=[];for({txid:e,vout:t}of o)r.push(Qt(e)),r.push(Xt(t));return y.join(r).digest}(),function(){var e,t=[];for({value:e}of r)t.push(tr(e));return y.join(t).digest}(),function(){var e,t=[];for({scriptPubKey:e}of r)t.push(kt(e,!0));return y.join(t).digest}(),function(){var e,t=[];for({sequence:e}of o)t.push(er(e));return y.join(t).digest}())}if(((3&n)<2||3<(3&n))&&g.push(function(){var e,t,r=[];for({value:e,scriptPubKey:t}of u)r.push(tr(e)),r.push(m.encode(t,!0));return y.join(r).digest}()),g.push(y.num(i,1)),p){const{value:r,scriptPubKey:t}=Hs(o[e]);g.push(Qt(c),Xt(d),tr(r),m.encode(t,!0),er(f))}else g.push(y.num(e,4).reverse());return void 0!==l&&g.push(l),3==(3&n)&&g.push((r=u[e],y.join([tr(r.value),m.encode(r.scriptPubKey,!0)]).digest)),void 0!==t&&g.push(y.bytes(t),y.num(s),y.num(a,4)),y.join(g).digest}function Hs(e){if(void 0===e.prevout)throw new Error("Prevout data missing for input: "+String(e.txid));return e.prevout}const Zs=0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2fn,Rs=0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141n;function js(e){e=y.str(e).digest;return y.join([e,e])}function Ds(e,t=192){return y.join([js("TapLeaf"),([t=192]=[t],254&t),y.normalize(e)]).digest.hex}function zs(e,t){return t<e&&([e,t]=[t,e]),y.join([js("TapBranch"),y.hex(e).raw,y.hex(t).raw]).digest.hex}function Fs(t,r,n=[]){const i=[],s=[];if(t.length<1)throw new Error("Tree is empty!");for(let e=0;e<t.length;e++){var a=t[e];if(Array.isArray(a)){const[t,s,u]=Fs(a,r);r=s,i.push(t);for(const t of u)n.push(t)}else i.push(a)}if(1===i.length)return[i[0],r,n];i.sort(),i.length%2!=0&&i.push(i[i.length-1]);for(let e=0;e<i.length-1;e+=2){var o=zs(i[e],i[e+1]);s.push(o),"string"==typeof r&&(r===i[e]?(n.push(i[e+1]),r=o):r===i[e+1]&&(n.push(i[e]),r=o))}return Fs(s,r,n)}function qs(e,t=new Uint8Array,r=!1){r=r?new p(e).point.x.raw:zt(e);return y.join([js("TapTweak"),r,y.bytes(t)]).digest}function Ks(e,t,r=!1){void 0===t&&(t=new Uint8Array);var n=y.bytes(e),e=qs(e,t,r);return(r?Vs:Ms)(n,e)}function Vs(e,t){let r=new p(e);return r.point.hasOddY&&(r=r.negate()),y.raw(r.add(t).raw)}function Ms(e,t){e=zt(e);e=new g(e).add(t);return y.raw(e.raw)}function Gs(e,t={}){const{isPrivate:r=!1,tree:n=[],version:i=192}=t,s=r?new b(e).pub.x.raw:zt(e);let a=t["target"];void 0!==a&&(a=y.bytes(a).hex);let o,u=[];if(0<n.length){const[t,i,s]=Fs(n,a);u=s,o=Ks(e,t,r)}else o=Ks(e,void 0!==a?a:void 0,r);const h=(r?new b(o).point.raw:o)[0],c=[y.num(i+Ys(h)),s];0<u.length&&u.forEach(e=>c.push(y.hex(e)));e=y.join(c);if(void 0===a||$s(o,a,e,t))return[zt(o).hex,e.hex];throw new Error("Path checking failed! Unable to generate path.")}function $s(e,t,r,n={}){var{isPrivate:n=!1,throws:i=!1}=n,{parity:r,paths:s,intkey:a}=Ws(r),n=n?new b(e).pub.x.raw:zt(e),e=y.join([r,n]);if(33!==e.length)return h("Invalid tapkey: "+e.hex,i);let o=y.bytes(t).hex;for(const e of s)o=zs(o,e);r=Ks(a,o);return y.raw(r).hex===y.raw(e).hex}function Ws(e){for(var t=new yt(y.bytes(e)),e=t.read(1).num,r=t.read(32),[e,n]=e%2==0?[e,2]:[e-1,3],i=[];32<=t.size;)i.push(t.read(32).hex);if(0!==t.size)throw new Error("Non-empty buffer on control block: "+String(t));return{intkey:r,paths:i,parity:n,version:e}}function Ys(e=2){if(0===e||1===e)return e;if(2===e||"02"===e)return 0;if(3===e||"03"===e)return 1;throw new Error("Invalid parity bit: "+String(e))}const Js={hash:Ls,sign:function(e,t,r,n={}){var i,{sigflag:s=0}=n,r=(e=e,t=Ls(t,r,n),r=y.random(32),t=y.bytes(t),e=new p(e),n=e.point,e=(n.hasEvenY?e:e.negated).big,r=mt("BIP0340/aux",y.bytes(r)),r=mt("BIP0340/nonce",e^r.big,n.x.raw,t),r=new p(r),i=r.point,r=(i.hasEvenY?r:r.negated).big,n=new p(mt("BIP0340/challenge",i.x.raw,n.x.raw,t)),t=new p(r+n.big*e),y.join([i.x.raw,t.raw]));return 0===s?y.raw(r):y.join([r,s])},verify:function(e,t,r={}){var e=v.fmt.toJson(e),{throws:n=!1}=r,{prevout:i,witness:s=[]}=e.vin[t],{cblock:a,script:o,params:u}=v.util.readWitness(s);if(u.length<1)return h("Invalid witness data: "+String(s),n);s=(i??{}).scriptPubKey;if(void 0===s)return h("Prevout scriptPubKey is empty!",n);var{type:i,data:s}=v.util.readScriptPubKey(s);if("p2tr"!==i)return h("Prevout script is not a valid taproot output:"+s.hex,n);if(32!==s.length)return h("Invalid tapkey length: "+String(s.length),n);if(null!==a&&null!==o){const e=Ds(o,254&a[0]);if(!$s(s,r.extension=e,a,{throws:n}))return h("cblock verification failed!",n)}var i=void 0!==r.pubkey?y.bytes(r.pubkey):1<u.length&&32===u[1].length?y.bytes(u[1]):y.bytes(s),o=m.fmt.toParam(u[0]),a=new yt(o),s=a.read(64).raw;return 1===a.size&&(r.sigflag=a.read(1).num,0===r.sigflag)?h("0x00 is not a valid appended sigflag!",n):([u,o,a,s=!1]=[s,Ls(e,t,r),i,n],a=new g(zt(a)),o=y.bytes(o),(u=y.bytes(u).stream).size<64&&h("Signature length is too small: "+String(u.size),s),(e=u.read(32)).big>Zs&&h("Signature r value greater than field size!",s),(u=u.read(32)).big>Rs&&h("Signature s value greater than curve order!",s),o=new p(mt("BIP0340/challenge",e.raw,a.x.raw,o)),u=new p(u).point,a=a.mul(o.big),(o=u.sub(a)).hasOddY&&h("Signature R value has odd Y coordinate!",s),0n===o.x.big&&h("Signature R value is infinite!",s),!(o.x.big!==e.big)||h("Invalid signature!",n))}},Qs={segwit:Cs,taproot:Js},Xs={getTag:js,getLeaf:Ds,getBranch:zs,getRoot:function(e){return y.hex(Fs(e)[0])}},ea={getPubKey:function(e,t={}){return Gs(e,{...t,isPrivate:!1})},getSecKey:function(e,t={}){return Gs(e,{...t,isPrivate:!0})},encodeScript:function(e,t){return Ds(m.fmt.toBytes(e),t)},checkPath:$s,tree:Xs,tweak:{getPubKey:function(e,t){return Ks(e,t)},getSecKey:function(e,t){return Ks(e,t,!0)},getTweak:qs,tweakSecKey:Vs,tweakPubKey:Ms},util:{readCtrlBlock:Ws,readParityBit:Ys}};class ta{constructor(e){this._buff=y.raw(kt(e))}get raw(){return this._buff.raw}get hex(){return this._buff.hex}get asm(){return St(this._buff)}getHash(e,t){switch(e){case"p2w":return this._buff.toHash("hash256").hex;case"p2sh":return this._buff.toHash("hash160").hex;case"p2tr":return Xs.getLeaf(this._buff,t);default:throw new Error("Unrecognized format: "+e)}}toJSON(){return this.asm??[]}}const ra=4294967295;class na{constructor(e){this.value="string"==typeof e?parseInt(e,16):e}get isReplaceable(){return this.value<ra}get isLocked(){return!(this.value!==ra||0!=(-2147483648&this.value))}get isTimelock(){return 0!=(4194304&this.value)}get timestamp(){return this.isLocked?this.isTimelock?512*this.value:512*this.value*600:0}set timestamp(e){this.value=Math.ceil(e/512)}get blockheight(){return this.isLocked?this.isTimelock?Math.ceil(512*this.value/600):this.value:0}set blockheight(e){this.value=e}get estDate(){return this.isTimelock?new Date(Date.now()+512*this.value*1e3):new Date(Date.now()+600*this.value*1e3)}set estDate(e){e=e.getTime()-Date.now();this.value=512e3<e?Math.ceil(e/1e3/512):1}toJSON(){return this.value}}let ia=class{constructor(e){this.value=BigInt(e.value),this.scriptPubKey=new ta(e.scriptPubKey)}get type(){var e=cr(this.scriptPubKey.raw)["type"];return e}};class sa{constructor(e,t){this._data=e,this._meta=hr(e),this.format=t}get length(){return this._data.length}get annex(){var e=this._meta.annex;return null!==e?y.raw(e).hex:void 0}get cblock(){var e=this._meta.cblock;return null!==e?y.raw(e).hex:void 0}get script(){var e=this._meta.script;return null!==e?m.decode(e):void 0}get params(){return this._meta.params}toJSON(){return this._data}}let aa=class{constructor(e,t){this._tx=e,this.idx=t}get data(){return this._tx.vin[this.idx]}get txid(){return this.data.txid}get vout(){return this.data.vout}get prevout(){return void 0!==this.data.prevout?new ia(this.data.prevout):void 0}get scriptSig(){return new ta(this.data.scriptSig)}get sequence(){return new na(this.data.sequence)}get witness(){return new sa(this.data.witness)}get type(){if(void 0===this.prevout)return"raw";var e=cr(this.prevout.scriptPubKey.raw)["type"];if("p2sh"!==e)return e;e=this.scriptSig.asm;if("OP_0"===e[0]){if(20===e[1].length)return"p2w-p2pkh";if(32===e[1].length)return"p2w-p2sh"}return"p2sh"}sign(e,t){if(this.type.startsWith("p2w"))return Qs.segwit.sign(e,this._tx,this.idx,t);if(this.type.startsWith("p2tr"))return Qs.taproot.sign(e,this._tx,this.idx,t);if(this.type.startsWith("p2pkh")||this.type.startsWith("p2sh"))throw new Error("This library does not support signing legacy transactions.");throw new Error("Unable to sign this input type:"+String(this.type))}};class oa{constructor(e=0){this.value=y.bytes(e).num}get isTimelock(){return 5e8<this.value}get timestamp(){return this.isTimelock?this.value:600*this.value}set timestamp(e){this.value=e}get blockheight(){return this.isTimelock?Math.floor(this.value/600):this.value}set blockheight(e){this.value=e}get estDate(){return this.isTimelock?new Date(Date.now()+1e3*this.value):new Date(Date.now()+600*this.value*1e3)}set estDate(e){this.value=Math.floor((e.getTime()-Date.now())/1e3)}toJSON(){return this.value}}(s=u=u||{}).assertEqual=e=>e,s.assertIs=function(e){},s.assertNever=function(e){throw new Error},s.arrayToEnum=e=>{var t={};for(const r of e)t[r]=r;return t},s.getValidEnumValues=t=>{var e=s.objectKeys(t).filter(e=>"number"!=typeof t[t[e]]),r={};for(const s of e)r[s]=t[s];return s.objectValues(r)},s.objectValues=t=>s.objectKeys(t).map(function(e){return t[e]}),s.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{var t=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},s.find=(e,t)=>{for(const r of e)if(t(r))return r},s.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,s.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},s.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t,(ui||(ui={})).mergeShapes=(e,t)=>({...e,...t});const w=u.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ua=e=>{switch(typeof e){case"undefined":return w.undefined;case"string":return w.string;case"number":return isNaN(e)?w.nan:w.number;case"boolean":return w.boolean;case"function":return w.function;case"bigint":return w.bigint;case"symbol":return w.symbol;case"object":return Array.isArray(e)?w.array:null===e?w.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?w.promise:"undefined"!=typeof Map&&e instanceof Map?w.map:"undefined"!=typeof Set&&e instanceof Set?w.set:"undefined"!=typeof Date&&e instanceof Date?w.date:w.object;default:return w.unknown}},x=u.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class _ extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};var t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(e){return e.message},i={_errors:[]},t=e=>{for(const r of e.issues)if("invalid_union"===r.code)r.unionErrors.map(t);else if("invalid_return_type"===r.code)t(r.returnTypeError);else if("invalid_arguments"===r.code)t(r.argumentsError);else if(0===r.path.length)i._errors.push(n(r));else{let e=i,t=0;for(;t<r.path.length;){const i=r.path[t];t===r.path.length-1?(e[i]=e[i]||{_errors:[]},e[i]._errors.push(n(r))):e[i]=e[i]||{_errors:[]},e=e[i],t++}}};return t(this),i}toString(){return this.message}get message(){return JSON.stringify(this.issues,u.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){var t={},r=[];for(const n of this.issues)(0<n.path.length?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]]):r).push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}_.create=e=>new _(e);const ha=(e,t)=>{let r;switch(e.code){case x.invalid_type:r=e.received===w.undefined?"Required":`Expected ${e.expected}, received `+e.received;break;case x.invalid_literal:r="Invalid literal value, expected "+JSON.stringify(e.expected,u.jsonStringifyReplacer);break;case x.unrecognized_keys:r="Unrecognized key(s) in object: "+u.joinValues(e.keys,", ");break;case x.invalid_union:r="Invalid input";break;case x.invalid_union_discriminator:r="Invalid discriminator value. Expected "+u.joinValues(e.options);break;case x.invalid_enum_value:r=`Invalid enum value. Expected ${u.joinValues(e.options)}, received '${e.received}'`;break;case x.invalid_arguments:r="Invalid function arguments";break;case x.invalid_return_type:r="Invalid function return type";break;case x.invalid_date:r="Invalid date";break;case x.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=r+" at one or more positions greater than or equal to "+e.validation.position)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:u.assertNever(e.validation):r="regex"!==e.validation?"Invalid "+e.validation:"Invalid";break;case x.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?"Number must be "+(e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than ")+e.minimum:"date"===e.type?"Date must be "+(e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than ")+new Date(Number(e.minimum)):"Invalid input";break;case x.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} `+e.maximum:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} `+e.maximum:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} `+new Date(Number(e.maximum)):"Invalid input";break;case x.custom:r="Invalid input";break;case x.invalid_intersection_types:r="Intersection results could not be merged";break;case x.not_multiple_of:r="Number must be a multiple of "+e.multipleOf;break;case x.not_finite:r="Number must be finite";break;default:r=t.defaultError,u.assertNever(e)}return{message:r}};let ca=ha;function da(){return ca}const fa=e=>{var{data:t,path:e,errorMaps:r,issueData:n}=e,e=[...e,...n.path||[]],i={...n,path:e};let s="";for(const e of r.filter(e=>!!e).slice().reverse())s=e(i,{data:t,defaultError:s}).message;return{...n,path:e,message:n.message||s}};function E(e,t){t=fa({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,ca,ha].filter(e=>!!e)});e.common.issues.push(t)}class A{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){var r=[];for(const n of t){if("aborted"===n.status)return k;"dirty"===n.status&&e.dirty(),r.push(n.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){var r=[];for(const e of t)r.push({key:await e.key,value:await e.value});return A.mergeObjectSync(e,r)}static mergeObjectSync(e,t){var r={};for(const n of t){const{key:t,value:i}=n;if("aborted"===t.status)return k;if("aborted"===i.status)return k;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),void 0===i.value&&!n.alwaysSet||(r[t.value]=i.value)}return{status:e.value,value:r}}}const k=Object.freeze({status:"aborted"}),la=e=>({status:"dirty",value:e}),T=e=>({status:"valid",value:e}),pa=e=>"aborted"===e.status,ga=e=>"dirty"===e.status,ya=e=>"valid"===e.status,ma=e=>"undefined"!=typeof Promise&&e instanceof Promise;(t=a=a||{}).errToObj=e=>"string"==typeof e?{message:e}:e||{},t.toString=e=>"string"==typeof e?e:null==e?void 0:e.message;class va{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const ba=(t,e)=>{if(ya(e))return{success:!0,data:e.value};if(t.common.issues.length)return{success:!1,get error(){var e;return this._error||(e=new _(t.common.issues),this._error=e),this._error}};throw new Error("Validation failed but no issues detected.")};function U(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:i}=e;if(t&&(r||n))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:i}:{errorMap:(e,t)=>"invalid_type"!==e.code?{message:t.defaultError}:void 0===t.data?{message:null!=n?n:t.defaultError}:{message:null!=r?r:t.defaultError},description:i}}class C{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return ua(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:ua(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new A,ctx:{common:e.parent.common,data:e.data,parsedType:ua(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){e=this._parse(e);if(ma(e))throw new Error("Synchronous parse encountered promise.");return e}_parseAsync(e){e=this._parse(e);return Promise.resolve(e)}parse(e,t){e=this.safeParse(e,t);if(e.success)return e.data;throw e.error}safeParse(e,t){var r={common:{issues:[],async:null!=(r=null==t?void 0:t.async)&&r,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ua(e)},t=this._parseSync({data:e,path:r.path,parent:r});return ba(r,t)}async parseAsync(e,t){e=await this.safeParseAsync(e,t);if(e.success)return e.data;throw e.error}async safeParseAsync(e,t){t={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ua(e)},e=this._parse({data:e,path:t.path,parent:t}),e=await(ma(e)?e:Promise.resolve(e));return ba(t,e)}refine(i,s){return this._refinement((t,r)=>{const e=i(t),n=()=>{return r.addIssue({code:x.custom,...(e=t,"string"==typeof s||void 0===s?{message:s}:"function"==typeof s?s(e):s)});var e};return"undefined"!=typeof Promise&&e instanceof Promise?e.then(e=>!!e||(n(),!1)):!!e||(n(),!1)})}refinement(r,n){return this._refinement((e,t)=>!!r(e)||(t.addIssue("function"==typeof n?n(e,t):n),!1))}_refinement(e){return new ro({schema:this,typeName:L.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return no.create(this,this._def)}nullable(){return io.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Da.create(this,this._def)}promise(){return to.create(this,this._def)}or(e){return za.create([this,e],this._def)}and(e){return Ka.create(this,e,this._def)}transform(e){return new ro({...U(this._def),schema:this,typeName:L.ZodEffects,effect:{type:"transform",transform:e}})}default(e){var t="function"==typeof e?e:()=>e;return new so({...U(this._def),innerType:this,defaultValue:t,typeName:L.ZodDefault})}brand(){return new uo({typeName:L.ZodBranded,type:this,...U(this._def)})}catch(e){var t="function"==typeof e?e:()=>e;return new ao({...U(this._def),innerType:this,catchValue:t,typeName:L.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return ho.create(this,e)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const wa=/^c[^\s-]{8,}$/i,xa=/^[a-z][a-z0-9]*$/,_a=/[0-9A-HJKMNP-TV-Z]{26}/,Ea=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,Aa=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\])|(\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\.[A-Za-z]{2,})+))$/,ka=/^(\p{Extended_Pictographic}|\p{Emoji_Component})+$/u,Oa=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,Sa=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/;class Ia extends C{constructor(){super(...arguments),this._regex=(t,e,r)=>this.refinement(e=>t.test(e),{validation:e,code:x.invalid_string,...a.errToObj(r)}),this.nonempty=e=>this.min(1,a.errToObj(e)),this.trim=()=>new Ia({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new Ia({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new Ia({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==w.string){const t=this._getOrReturnCtx(e);return E(t,{code:x.invalid_type,expected:w.string,received:t.parsedType}),k}const t=new A;let r;for(const a of this._def.checks)if("min"===a.kind)e.data.length<a.value&&(r=this._getOrReturnCtx(e,r),E(r,{code:x.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),t.dirty());else if("max"===a.kind)e.data.length>a.value&&(r=this._getOrReturnCtx(e,r),E(r,{code:x.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),t.dirty());else if("length"===a.kind){const n=e.data.length>a.value,i=e.data.length<a.value;(n||i)&&(r=this._getOrReturnCtx(e,r),n?E(r,{code:x.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):i&&E(r,{code:x.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),t.dirty())}else if("email"===a.kind)Aa.test(e.data)||(r=this._getOrReturnCtx(e,r),E(r,{validation:"email",code:x.invalid_string,message:a.message}),t.dirty());else if("emoji"===a.kind)ka.test(e.data)||(r=this._getOrReturnCtx(e,r),E(r,{validation:"emoji",code:x.invalid_string,message:a.message}),t.dirty());else if("uuid"===a.kind)Ea.test(e.data)||(r=this._getOrReturnCtx(e,r),E(r,{validation:"uuid",code:x.invalid_string,message:a.message}),t.dirty());else if("cuid"===a.kind)wa.test(e.data)||(r=this._getOrReturnCtx(e,r),E(r,{validation:"cuid",code:x.invalid_string,message:a.message}),t.dirty());else if("cuid2"===a.kind)xa.test(e.data)||(r=this._getOrReturnCtx(e,r),E(r,{validation:"cuid2",code:x.invalid_string,message:a.message}),t.dirty());else if("ulid"===a.kind)_a.test(e.data)||(r=this._getOrReturnCtx(e,r),E(r,{validation:"ulid",code:x.invalid_string,message:a.message}),t.dirty());else if("url"===a.kind)try{new URL(e.data)}catch(n){E(r=this._getOrReturnCtx(e,r),{validation:"url",code:x.invalid_string,message:a.message}),t.dirty()}else"regex"===a.kind?(a.regex.lastIndex=0,a.regex.test(e.data)||(E(r=this._getOrReturnCtx(e,r),{validation:"regex",code:x.invalid_string,message:a.message}),t.dirty())):"trim"===a.kind?e.data=e.data.trim():"includes"===a.kind?e.data.includes(a.value,a.position)||(E(r=this._getOrReturnCtx(e,r),{code:x.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),t.dirty()):"toLowerCase"===a.kind?e.data=e.data.toLowerCase():"toUpperCase"===a.kind?e.data=e.data.toUpperCase():"startsWith"===a.kind?e.data.startsWith(a.value)||(E(r=this._getOrReturnCtx(e,r),{code:x.invalid_string,validation:{startsWith:a.value},message:a.message}),t.dirty()):"endsWith"===a.kind?e.data.endsWith(a.value)||(E(r=this._getOrReturnCtx(e,r),{code:x.invalid_string,validation:{endsWith:a.value},message:a.message}),t.dirty()):"datetime"===a.kind?((s=a).precision?s.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${s.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${s.precision}}Z$`):0===s.precision?s.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):s.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$")).test(e.data)||(E(r=this._getOrReturnCtx(e,r),{code:x.invalid_string,validation:"datetime",message:a.message}),t.dirty()):"ip"===a.kind?(n=e.data,("v4"!==(i=a.version)&&i||!Oa.test(n))&&("v6"!==i&&i||!Sa.test(n))&&(E(r=this._getOrReturnCtx(e,r),{validation:"ip",code:x.invalid_string,message:a.message}),t.dirty())):u.assertNever(a);var n,i,s;return{status:t.value,value:e.data}}_addCheck(e){return new Ia({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...a.errToObj(e)})}url(e){return this._addCheck({kind:"url",...a.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...a.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...a.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...a.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...a.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...a.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...a.errToObj(e)})}datetime(e){var t;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!=(t=null==e?void 0:e.offset)&&t,...a.errToObj(null==e?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...a.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...a.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...a.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...a.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...a.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...a.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...a.errToObj(t)})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}Ia.create=e=>{var t;return new Ia({checks:[],typeName:L.ZodString,coerce:null!=(t=null==e?void 0:e.coerce)&&t,...U(e)})};class Pa extends C{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==w.number){const t=this._getOrReturnCtx(e);return E(t,{code:x.invalid_type,expected:w.number,received:t.parsedType}),k}let t;var r,n,i,s,a=new A;for(const o of this._def.checks)"int"===o.kind?u.isInteger(e.data)||(E(t=this._getOrReturnCtx(e,t),{code:x.invalid_type,expected:"integer",received:"float",message:o.message}),a.dirty()):"min"===o.kind?(o.inclusive?e.data<o.value:e.data<=o.value)&&(E(t=this._getOrReturnCtx(e,t),{code:x.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),a.dirty()):"max"===o.kind?(o.inclusive?e.data>o.value:e.data>=o.value)&&(E(t=this._getOrReturnCtx(e,t),{code:x.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),a.dirty()):"multipleOf"===o.kind?0!=(r=e.data,n=o.value,i=s=i=void 0,i=(r.toString().split(".")[1]||"").length,s=(n.toString().split(".")[1]||"").length,i=s<i?i:s,parseInt(r.toFixed(i).replace(".",""))%parseInt(n.toFixed(i).replace(".",""))/Math.pow(10,i))&&(E(t=this._getOrReturnCtx(e,t),{code:x.not_multiple_of,multipleOf:o.value,message:o.message}),a.dirty()):"finite"===o.kind?Number.isFinite(e.data)||(E(t=this._getOrReturnCtx(e,t),{code:x.not_finite,message:o.message}),a.dirty()):u.assertNever(o);return{status:a.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,a.toString(t))}gt(e,t){return this.setLimit("min",e,!1,a.toString(t))}lte(e,t){return this.setLimit("max",e,!0,a.toString(t))}lt(e,t){return this.setLimit("max",e,!1,a.toString(t))}setLimit(e,t,r,n){return new Pa({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:a.toString(n)}]})}_addCheck(e){return new Pa({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:a.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:a.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:a.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:a.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:a.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:a.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:a.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:a.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:a.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&u.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Pa.create=e=>new Pa({checks:[],typeName:L.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...U(e)});class Ba extends C{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==w.bigint){const t=this._getOrReturnCtx(e);return E(t,{code:x.invalid_type,expected:w.bigint,received:t.parsedType}),k}let t;var r=new A;for(const n of this._def.checks)"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(E(t=this._getOrReturnCtx(e,t),{code:x.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(E(t=this._getOrReturnCtx(e,t),{code:x.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"multipleOf"===n.kind?e.data%n.value!==BigInt(0)&&(E(t=this._getOrReturnCtx(e,t),{code:x.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):u.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,a.toString(t))}gt(e,t){return this.setLimit("min",e,!1,a.toString(t))}lte(e,t){return this.setLimit("max",e,!0,a.toString(t))}lt(e,t){return this.setLimit("max",e,!1,a.toString(t))}setLimit(e,t,r,n){return new Ba({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:a.toString(n)}]})}_addCheck(e){return new Ba({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:a.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:a.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:a.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:a.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:a.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}Ba.create=e=>{var t;return new Ba({checks:[],typeName:L.ZodBigInt,coerce:null!=(t=null==e?void 0:e.coerce)&&t,...U(e)})};class Ta extends C{_parse(e){var t;return this._def.coerce&&(e.data=Boolean(e.data)),this._getType(e)!==w.boolean?(E(t=this._getOrReturnCtx(e),{code:x.invalid_type,expected:w.boolean,received:t.parsedType}),k):T(e.data)}}Ta.create=e=>new Ta({typeName:L.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...U(e)});class Ua extends C{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==w.date){const t=this._getOrReturnCtx(e);return E(t,{code:x.invalid_type,expected:w.date,received:t.parsedType}),k}if(isNaN(e.data.getTime()))return E(this._getOrReturnCtx(e),{code:x.invalid_date}),k;const t=new A;let r;for(const n of this._def.checks)"min"===n.kind?e.data.getTime()<n.value&&(r=this._getOrReturnCtx(e,r),E(r,{code:x.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),t.dirty()):"max"===n.kind?e.data.getTime()>n.value&&(r=this._getOrReturnCtx(e,r),E(r,{code:x.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),t.dirty()):u.assertNever(n);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Ua({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:a.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:a.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}Ua.create=e=>new Ua({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:L.ZodDate,...U(e)});class Ca extends C{_parse(e){var t;return this._getType(e)!==w.symbol?(E(t=this._getOrReturnCtx(e),{code:x.invalid_type,expected:w.symbol,received:t.parsedType}),k):T(e.data)}}Ca.create=e=>new Ca({typeName:L.ZodSymbol,...U(e)});class Na extends C{_parse(e){var t;return this._getType(e)!==w.undefined?(E(t=this._getOrReturnCtx(e),{code:x.invalid_type,expected:w.undefined,received:t.parsedType}),k):T(e.data)}}Na.create=e=>new Na({typeName:L.ZodUndefined,...U(e)});class La extends C{_parse(e){var t;return this._getType(e)!==w.null?(E(t=this._getOrReturnCtx(e),{code:x.invalid_type,expected:w.null,received:t.parsedType}),k):T(e.data)}}La.create=e=>new La({typeName:L.ZodNull,...U(e)});class Ha extends C{constructor(){super(...arguments),this._any=!0}_parse(e){return T(e.data)}}Ha.create=e=>new Ha({typeName:L.ZodAny,...U(e)});class Za extends C{constructor(){super(...arguments),this._unknown=!0}_parse(e){return T(e.data)}}Za.create=e=>new Za({typeName:L.ZodUnknown,...U(e)});class Ra extends C{_parse(e){e=this._getOrReturnCtx(e);return E(e,{code:x.invalid_type,expected:w.never,received:e.parsedType}),k}}Ra.create=e=>new Ra({typeName:L.ZodNever,...U(e)});class ja extends C{_parse(e){var t;return this._getType(e)!==w.undefined?(E(t=this._getOrReturnCtx(e),{code:x.invalid_type,expected:w.void,received:t.parsedType}),k):T(e.data)}}ja.create=e=>new ja({typeName:L.ZodVoid,...U(e)});class Da extends C{_parse(e){const{ctx:r,status:t}=this._processInputParams(e),n=this._def;if(r.parsedType!==w.array)return E(r,{code:x.invalid_type,expected:w.array,received:r.parsedType}),k;if(null!==n.exactLength){const e=r.data.length>n.exactLength.value,i=r.data.length<n.exactLength.value;(e||i)&&(E(r,{code:e?x.too_big:x.too_small,minimum:i?n.exactLength.value:void 0,maximum:e?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),t.dirty())}if(null!==n.minLength&&r.data.length<n.minLength.value&&(E(r,{code:x.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),t.dirty()),null!==n.maxLength&&r.data.length>n.maxLength.value&&(E(r,{code:x.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),t.dirty()),r.common.async)return Promise.all([...r.data].map((e,t)=>n.type._parseAsync(new va(r,e,r.path,t)))).then(e=>A.mergeArray(t,e));const i=[...r.data].map((e,t)=>n.type._parseSync(new va(r,e,r.path,t)));return A.mergeArray(t,i)}get element(){return this._def.type}min(e,t){return new Da({...this._def,minLength:{value:e,message:a.toString(t)}})}max(e,t){return new Da({...this._def,maxLength:{value:e,message:a.toString(t)}})}length(e,t){return new Da({...this._def,exactLength:{value:e,message:a.toString(t)}})}nonempty(e){return this.min(1,e)}}Da.create=(e,t)=>new Da({type:e,minLength:null,maxLength:null,exactLength:null,typeName:L.ZodArray,...U(t)});class N extends C{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){var e,t;return null!==this._cached?this._cached:(e=this._def.shape(),t=u.objectKeys(e),this._cached={shape:e,keys:t})}_parse(e){if(this._getType(e)!==w.object){const t=this._getOrReturnCtx(e);return E(t,{code:x.invalid_type,expected:w.object,received:t.parsedType}),k}const{status:t,ctx:r}=this._processInputParams(e),{shape:n,keys:i}=this._getCached(),s=[];if(!(this._def.catchall instanceof Ra&&"strip"===this._def.unknownKeys))for(const e in r.data)i.includes(e)||s.push(e);const a=[];for(const e of i){const t=n[e],i=r.data[e];a.push({key:{status:"valid",value:e},value:t._parse(new va(r,i,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof Ra){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of s)a.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)0<s.length&&(E(r,{code:x.unrecognized_keys,keys:s}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of s){const n=r.data[t];a.push({key:{status:"valid",value:t},value:e._parse(new va(r,n,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{var e=[];for(const r of a){var t=await r.key;e.push({key:t,value:await r.value,alwaysSet:r.alwaysSet})}return e}).then(e=>A.mergeObjectSync(t,e)):A.mergeObjectSync(t,a)}get shape(){return this._def.shape()}strict(i){return new N({...this._def,unknownKeys:"strict",...void 0!==i?{errorMap:(e,t)=>{var r,n=null!=(r=null==(r=(n=this._def).errorMap)?void 0:r.call(n,e,t).message)?r:t.defaultError;return"unrecognized_keys"===e.code?{message:null!=(r=a.errToObj(i).message)?r:n}:{message:n}}}:{}})}strip(){return new N({...this._def,unknownKeys:"strip"})}passthrough(){return new N({...this._def,unknownKeys:"passthrough"})}extend(e){return new N({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new N({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:L.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new N({...this._def,catchall:e})}pick(t){const r={};return u.objectKeys(t).forEach(e=>{t[e]&&this.shape[e]&&(r[e]=this.shape[e])}),new N({...this._def,shape:()=>r})}omit(t){const r={};return u.objectKeys(this.shape).forEach(e=>{t[e]||(r[e]=this.shape[e])}),new N({...this._def,shape:()=>r})}deepPartial(){return function t(e){if(e instanceof N){const n={};for(const i in e.shape){var r=e.shape[i];n[i]=no.create(t(r))}return new N({...e._def,shape:()=>n})}return e instanceof Da?new Da({...e._def,type:t(e.element)}):e instanceof no?no.create(t(e.unwrap())):e instanceof io?io.create(t(e.unwrap())):e instanceof Va?Va.create(e.items.map(e=>t(e))):e}(this)}partial(r){const n={};return u.objectKeys(this.shape).forEach(e=>{var t=this.shape[e];r&&!r[e]?n[e]=t:n[e]=t.optional()}),new N({...this._def,shape:()=>n})}required(e){const r={};return u.objectKeys(this.shape).forEach(t=>{if(e&&!e[t])r[t]=this.shape[t];else{let e=this.shape[t];for(;e instanceof no;)e=e._def.innerType;r[t]=e}}),new N({...this._def,shape:()=>r})}keyof(){return Qa(u.objectKeys(this.shape))}}N.create=(e,t)=>new N({shape:()=>e,unknownKeys:"strip",catchall:Ra.create(),typeName:L.ZodObject,...U(t)}),N.strictCreate=(e,t)=>new N({shape:()=>e,unknownKeys:"strict",catchall:Ra.create(),typeName:L.ZodObject,...U(t)}),N.lazycreate=(e,t)=>new N({shape:e,unknownKeys:"strip",catchall:Ra.create(),typeName:L.ZodObject,...U(t)});class za extends C{_parse(t){const r=this._processInputParams(t)["ctx"],n=this._def.options;if(r.common.async)return Promise.all(n.map(async e=>{var t={...r,common:{...r.common,issues:[]},parent:null};return{result:await e._parseAsync({data:r.data,path:r.path,parent:t}),ctx:t}})).then(function(e){for(const r of e)if("valid"===r.result.status)return r.result;for(const t of e)if("dirty"===t.result.status)return r.common.issues.push(...t.ctx.common.issues),t.result;const t=e.map(e=>new _(e.ctx.common.issues));return E(r,{code:x.invalid_union,unionErrors:t}),k});{let e;var i=[];for(const s of n){const n={...r,common:{...r.common,issues:[]},parent:null},a=s._parseSync({data:r.data,path:r.path,parent:n});if("valid"===a.status)return a;"dirty"===a.status&&(e=e||{result:a,ctx:n}),n.common.issues.length&&i.push(n.common.issues)}return e?(r.common.issues.push(...e.ctx.common.issues),e.result):(t=i.map(e=>new _(e)),E(r,{code:x.invalid_union,unionErrors:t}),k)}}get options(){return this._def.options}}za.create=(e,t)=>new za({options:e,typeName:L.ZodUnion,...U(t)});const Fa=e=>e instanceof Ya?Fa(e.schema):e instanceof ro?Fa(e.innerType()):e instanceof Ja?[e.value]:e instanceof Xa?e.options:e instanceof eo?Object.keys(e.enum):e instanceof so?Fa(e._def.innerType):e instanceof Na?[void 0]:e instanceof La?[null]:null;class qa extends C{_parse(e){var t,r,e=this._processInputParams(e)["ctx"];return e.parsedType!==w.object?(E(e,{code:x.invalid_type,expected:w.object,received:e.parsedType}),k):(t=this.discriminator,r=e.data[t],(r=this.optionsMap.get(r))?e.common.async?r._parseAsync({data:e.data,path:e.path,parent:e}):r._parseSync({data:e.data,path:e.path,parent:e}):(E(e,{code:x.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[t]}),k))}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){var n=new Map;for(const r of t){const t=Fa(r.shape[e]);if(!t)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const i of t){if(n.has(i))throw new Error(`Discriminator property ${String(e)} has duplicate value `+String(i));n.set(i,r)}}return new qa({typeName:L.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...U(r)})}}class Ka extends C{_parse(e){const{status:n,ctx:i}=this._processInputParams(e),r=(e,t)=>{var r;return pa(e)||pa(t)?k:(r=function t(r,n){const i=ua(r),e=ua(n);if(r===n)return{valid:!0,data:r};if(i===w.object&&e===w.object){const i=u.objectKeys(n),e=u.objectKeys(r).filter(e=>-1!==i.indexOf(e)),a={...r,...n};for(const i of e){const e=t(r[i],n[i]);if(!e.valid)return{valid:!1};a[i]=e.data}return{valid:!0,data:a}}if(i!==w.array||e!==w.array)return i===w.date&&e===w.date&&+r==+n?{valid:!0,data:r}:{valid:!1};{if(r.length!==n.length)return{valid:!1};const i=[];for(let e=0;e<r.length;e++){var s=t(r[e],n[e]);if(!s.valid)return{valid:!1};i.push(s.data)}return{valid:!0,data:i}}}(e.value,t.value)).valid?((ga(e)||ga(t))&&n.dirty(),{status:n.value,value:r.data}):(E(i,{code:x.invalid_intersection_types}),k)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([e,t])=>r(e,t)):r(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}Ka.create=(e,t,r)=>new Ka({left:e,right:t,typeName:L.ZodIntersection,...U(r)});class Va extends C{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==w.array)return E(n,{code:x.invalid_type,expected:w.array,received:n.parsedType}),k;if(n.data.length<this._def.items.length)return E(n,{code:x.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),k;!this._def.rest&&n.data.length>this._def.items.length&&(E(n,{code:x.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());e=[...n.data].map((e,t)=>{var r=this._def.items[t]||this._def.rest;return r?r._parse(new va(n,e,n.path,t)):null}).filter(e=>!!e);return n.common.async?Promise.all(e).then(e=>A.mergeArray(t,e)):A.mergeArray(t,e)}get items(){return this._def.items}rest(e){return new Va({...this._def,rest:e})}}Va.create=(e,t)=>{if(Array.isArray(e))return new Va({items:e,typeName:L.ZodTuple,rest:null,...U(t)});throw new Error("You must pass an array of schemas to z.tuple([ ... ])")};class Ma extends C{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){var{status:e,ctx:t}=this._processInputParams(e);if(t.parsedType!==w.object)return E(t,{code:x.invalid_type,expected:w.object,received:t.parsedType}),k;var r=[],n=this._def.keyType,i=this._def.valueType;for(const e in t.data)r.push({key:n._parse(new va(t,e,t.path,e)),value:i._parse(new va(t,t.data[e],t.path,e))});return t.common.async?A.mergeObjectAsync(e,r):A.mergeObjectSync(e,r)}get element(){return this._def.valueType}static create(e,t,r){return new Ma(t instanceof C?{keyType:e,valueType:t,typeName:L.ZodRecord,...U(r)}:{keyType:Ia.create(),valueType:e,typeName:L.ZodRecord,...U(t)})}}class Ga extends C{_parse(n){const{status:i,ctx:s}=this._processInputParams(n);if(s.parsedType!==w.map)return E(s,{code:x.invalid_type,expected:w.map,received:s.parsedType}),k;const a=this._def.keyType,o=this._def.valueType,u=[...s.data.entries()].map(([e,t],r)=>({key:a._parse(new va(s,e,s.path,[r,"key"])),value:o._parse(new va(s,t,s.path,[r,"value"]))}));if(s.common.async){const n=new Map;return Promise.resolve().then(async()=>{for(const r of u){var e=await r.key,t=await r.value;if("aborted"===e.status||"aborted"===t.status)return k;"dirty"!==e.status&&"dirty"!==t.status||i.dirty(),n.set(e.value,t.value)}return{status:i.value,value:n}})}{const n=new Map;for(const s of u){const a=s.key,o=s.value;if("aborted"===a.status||"aborted"===o.status)return k;"dirty"!==a.status&&"dirty"!==o.status||i.dirty(),n.set(a.value,o.value)}return{status:i.value,value:n}}}}Ga.create=(e,t,r)=>new Ga({valueType:t,keyType:e,typeName:L.ZodMap,...U(r)});class $a extends C{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==w.set)return E(r,{code:x.invalid_type,expected:w.set,received:r.parsedType}),k;e=this._def;null!==e.minSize&&r.data.size<e.minSize.value&&(E(r,{code:x.too_small,minimum:e.minSize.value,type:"set",inclusive:!0,exact:!1,message:e.minSize.message}),n.dirty()),null!==e.maxSize&&r.data.size>e.maxSize.value&&(E(r,{code:x.too_big,maximum:e.maxSize.value,type:"set",inclusive:!0,exact:!1,message:e.maxSize.message}),n.dirty());const i=this._def.valueType;function t(e){var t=new Set;for(const r of e){if("aborted"===r.status)return k;"dirty"===r.status&&n.dirty(),t.add(r.value)}return{status:n.value,value:t}}e=[...r.data.values()].map((e,t)=>i._parse(new va(r,e,r.path,t)));return r.common.async?Promise.all(e).then(e=>t(e)):t(e)}min(e,t){return new $a({...this._def,minSize:{value:e,message:a.toString(t)}})}max(e,t){return new $a({...this._def,maxSize:{value:e,message:a.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}$a.create=(e,t)=>new $a({valueType:e,minSize:null,maxSize:null,typeName:L.ZodSet,...U(t)});class Wa extends C{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const r=this._processInputParams(e)["ctx"];if(r.parsedType!==w.function)return E(r,{code:x.invalid_type,expected:w.function,received:r.parsedType}),k;function i(e,t){return fa({data:e,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,ca,ha].filter(e=>!!e),issueData:{code:x.invalid_arguments,argumentsError:t}})}function s(e,t){return fa({data:e,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,ca,ha].filter(e=>!!e),issueData:{code:x.invalid_return_type,returnTypeError:t}})}const a={errorMap:r.common.contextualErrorMap},o=r.data;return this._def.returns instanceof to?T(async(...t)=>{const r=new _([]),e=await this._def.args.parseAsync(t,a).catch(e=>{throw r.addIssue(i(t,e)),r}),n=await o(...e);return this._def.returns._def.type.parseAsync(n,a).catch(e=>{throw r.addIssue(s(n,e)),r})}):T((...e)=>{var t=this._def.args.safeParse(e,a);if(!t.success)throw new _([i(e,t.error)]);e=o(...t.data),t=this._def.returns.safeParse(e,a);if(t.success)return t.data;throw new _([s(e,t.error)])})}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Wa({...this._def,args:Va.create(e).rest(Za.create())})}returns(e){return new Wa({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new Wa({args:e||Va.create([]).rest(Za.create()),returns:t||Za.create(),typeName:L.ZodFunction,...U(r)})}}class Ya extends C{get schema(){return this._def.getter()}_parse(e){e=this._processInputParams(e).ctx;return this._def.getter()._parse({data:e.data,path:e.path,parent:e})}}Ya.create=(e,t)=>new Ya({getter:e,typeName:L.ZodLazy,...U(t)});class Ja extends C{_parse(e){var t;return e.data!==this._def.value?(E(t=this._getOrReturnCtx(e),{received:t.data,code:x.invalid_literal,expected:this._def.value}),k):{status:"valid",value:e.data}}get value(){return this._def.value}}function Qa(e,t){return new Xa({values:e,typeName:L.ZodEnum,...U(t)})}Ja.create=(e,t)=>new Ja({value:e,typeName:L.ZodLiteral,...U(t)});class Xa extends C{_parse(e){var t,r;return"string"!=typeof e.data?(r=this._getOrReturnCtx(e),t=this._def.values,E(r,{expected:u.joinValues(t),received:r.parsedType,code:x.invalid_type}),k):-1===this._def.values.indexOf(e.data)?(t=this._getOrReturnCtx(e),r=this._def.values,E(t,{received:t.data,code:x.invalid_enum_value,options:r}),k):T(e.data)}get options(){return this._def.values}get enum(){var e={};for(const t of this._def.values)e[t]=t;return e}get Values(){var e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){var e={};for(const t of this._def.values)e[t]=t;return e}extract(e){return Xa.create(e)}exclude(t){return Xa.create(this.options.filter(e=>!t.includes(e)))}}Xa.create=Qa;class eo extends C{_parse(e){var t=u.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==w.string&&r.parsedType!==w.number){const e=u.objectValues(t);return E(r,{expected:u.joinValues(e),received:r.parsedType,code:x.invalid_type}),k}if(-1!==t.indexOf(e.data))return T(e.data);{const e=u.objectValues(t);return E(r,{received:r.data,code:x.invalid_enum_value,options:e}),k}}get enum(){return this._def.values}}eo.create=(e,t)=>new eo({values:e,typeName:L.ZodNativeEnum,...U(t)});class to extends C{unwrap(){return this._def.type}_parse(e){const t=this._processInputParams(e)["ctx"];return t.parsedType!==w.promise&&!1===t.common.async?(E(t,{code:x.invalid_type,expected:w.promise,received:t.parsedType}),k):(e=t.parsedType===w.promise?t.data:Promise.resolve(t.data),T(e.then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}to.create=(e,t)=>new to({type:e,typeName:L.ZodPromise,...U(t)});class ro extends C{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===L.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:r,ctx:n}=this._processInputParams(t),i=this._def.effect||null;if("preprocess"===i.type){const t=i.transform(n.data);return n.common.async?Promise.resolve(t).then(e=>this._def.schema._parseAsync({data:e,path:n.path,parent:n})):this._def.schema._parseSync({data:t,path:n.path,parent:n})}const s={addIssue:e=>{E(n,e),e.fatal?r.abort():r.dirty()},get path(){return n.path}};if(s.addIssue=s.addIssue.bind(s),"refinement"===i.type){const t=e=>{var t=i.refinement(e,s);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==n.common.async)return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(e=>"aborted"===e.status?k:("dirty"===e.status&&r.dirty(),t(e.value).then(()=>({status:r.value,value:e.value}))));{const i=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===i.status?k:("dirty"===i.status&&r.dirty(),t(i.value),{status:r.value,value:i.value})}}if("transform"===i.type){if(!1!==n.common.async)return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(e=>ya(e)?Promise.resolve(i.transform(e.value,s)).then(e=>({status:r.value,value:e})):e);{const t=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!ya(t))return t;var e=i.transform(t.value,s);if(e instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:e}}}u.assertNever(i)}}ro.create=(e,t,r)=>new ro({schema:e,typeName:L.ZodEffects,effect:t,...U(r)}),ro.createWithPreprocess=(e,t,r)=>new ro({schema:t,effect:{type:"preprocess",transform:e},typeName:L.ZodEffects,...U(r)});class no extends C{_parse(e){return this._getType(e)===w.undefined?T(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}no.create=(e,t)=>new no({innerType:e,typeName:L.ZodOptional,...U(t)});class io extends C{_parse(e){return this._getType(e)===w.null?T(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}io.create=(e,t)=>new io({innerType:e,typeName:L.ZodNullable,...U(t)});class so extends C{_parse(e){e=this._processInputParams(e).ctx;let t=e.data;return e.parsedType===w.undefined&&(t=this._def.defaultValue()),this._def.innerType._parse({data:t,path:e.path,parent:e})}removeDefault(){return this._def.innerType}}so.create=(e,t)=>new so({innerType:e,typeName:L.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...U(t)});class ao extends C{_parse(e){const t=this._processInputParams(e)["ctx"],r={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return ma(n)?n.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new _(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new _(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}ao.create=(e,t)=>new ao({innerType:e,typeName:L.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...U(t)});class oo extends C{_parse(e){var t;return this._getType(e)!==w.nan?(E(t=this._getOrReturnCtx(e),{code:x.invalid_type,expected:w.nan,received:t.parsedType}),k):{status:"valid",value:e.data}}}oo.create=e=>new oo({typeName:L.ZodNaN,...U(e)});var L,e=Symbol("zod_brand");class uo extends C{_parse(e){var e=this._processInputParams(e)["ctx"],t=e.data;return this._def.type._parse({data:t,path:e.path,parent:e})}unwrap(){return this._def.type}}class ho extends C{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{var e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?k:"dirty"===e.status?(t.dirty(),la(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{const e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?k:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new ho({in:e,out:t,typeName:L.ZodPipeline})}}const co=(i,s={},a)=>i?Ha.create().superRefine((e,t)=>{if(!i(e)){const i="function"==typeof s?s(e):"string"==typeof s?{message:s}:s,r=null==(e=null!=(e=i.fatal)?e:a)||e,n="string"==typeof i?{message:i}:i;t.addIssue({code:"custom",...n,fatal:r})}}):Ha.create(),fo={object:N.lazycreate},lo=((t=L=L||{}).ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",Ia.create),po=Pa.create,go=oo.create,yo=Ba.create,mo=Ta.create,vo=Ua.create,bo=Ca.create,wo=Na.create,xo=La.create,_o=Ha.create,Eo=Za.create,Ao=Ra.create,ko=ja.create,Oo=Da.create,So=N.create,Io=N.strictCreate,Po=za.create,Bo=qa.create,To=Ka.create,Uo=Va.create,Co=Ma.create,No=Ga.create,Lo=$a.create,Ho=Wa.create,Zo=Ya.create,Ro=Ja.create,jo=Xa.create,Do=eo.create,zo=to.create,Fo=ro.create,qo=no.create,Ko=io.create,Vo=ro.createWithPreprocess,Mo=ho.create,Go={string:e=>Ia.create({...e,coerce:!0}),number:e=>Pa.create({...e,coerce:!0}),boolean:e=>Ta.create({...e,coerce:!0}),bigint:e=>Ba.create({...e,coerce:!0}),date:e=>Ua.create({...e,coerce:!0})},$o=k;t=Object.freeze({__proto__:null,defaultErrorMap:ha,setErrorMap:function(e){ca=e},getErrorMap:da,makeIssue:fa,EMPTY_PATH:[],addIssueToContext:E,ParseStatus:A,INVALID:k,DIRTY:la,OK:T,isAborted:pa,isDirty:ga,isValid:ya,isAsync:ma,get util(){return u},get objectUtil(){return ui},ZodParsedType:w,getParsedType:ua,ZodType:C,ZodString:Ia,ZodNumber:Pa,ZodBigInt:Ba,ZodBoolean:Ta,ZodDate:Ua,ZodSymbol:Ca,ZodUndefined:Na,ZodNull:La,ZodAny:Ha,ZodUnknown:Za,ZodNever:Ra,ZodVoid:ja,ZodArray:Da,ZodObject:N,ZodUnion:za,ZodDiscriminatedUnion:qa,ZodIntersection:Ka,ZodTuple:Va,ZodRecord:Ma,ZodMap:Ga,ZodSet:$a,ZodFunction:Wa,ZodLazy:Ya,ZodLiteral:Ja,ZodEnum:Xa,ZodNativeEnum:eo,ZodPromise:to,ZodEffects:ro,ZodTransformer:ro,ZodOptional:no,ZodNullable:io,ZodDefault:so,ZodCatch:ao,ZodNaN:oo,BRAND:e,ZodBranded:uo,ZodPipeline:ho,custom:co,Schema:C,ZodSchema:C,late:fo,get ZodFirstPartyTypeKind(){return L},coerce:Go,any:_o,array:Oo,bigint:yo,boolean:mo,date:vo,discriminatedUnion:Bo,effect:Fo,enum:jo,function:Ho,instanceof:(t,e={message:"Input not instance of "+t.name})=>co(e=>e instanceof t,e),intersection:To,lazy:Zo,literal:Ro,map:No,nan:go,nativeEnum:Do,never:Ao,null:xo,nullable:Ko,number:po,object:So,oboolean:()=>mo().optional(),onumber:()=>po().optional(),optional:qo,ostring:()=>lo().optional(),pipeline:Mo,preprocess:Vo,promise:zo,record:Co,set:Lo,strictObject:Io,string:lo,symbol:bo,transformer:Fo,tuple:Uo,undefined:wo,union:Po,unknown:Eo,void:ko,NEVER:$o,ZodIssueCode:x,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:_});const Wo=t.string().regex(/^[a-fA-F0-9]$/),Yo=t.string().regex(/^[a-fA-F0-9]{64}$/),Jo=t.number().min(0).max(4294967295),Qo=t.bigint(),Xo=t.instanceof(Uint8Array),eu=t.union([Wo,Jo,t.string(),Xo]).array(),tu=t.union([eu,Wo,Xo]),ru=t.array(tu),nu=t.object({value:t.union([Jo,Qo]),scriptPubKey:tu}),iu=t.object({txid:Yo,vout:Jo,scriptSig:tu,sequence:Jo,prevout:nu.optional(),witness:ru}),su={TxData:t.object({version:Jo,vin:t.array(iu),vout:t.array(nu),locktime:Jo}),TxInput:iu,TxOutput:nu,witness:ru,script:tu,hexstr:Wo,hash:Yo,uint32:Jo,uint64:Qo};return n.Address=pr,n.Input=aa,n.Output=ia,n.Script=m,n.Sequence=na,n.Signer=Qs,n.Tap=ea,n.Transaction=class{constructor(e){(e="string"==typeof e?y.hex(e):e)instanceof Uint8Array&&(e=v.decode(e));var t=su.TxData;this._data=t.parse(v.create(e))}get data(){return this._data}get version(){return this.data.version}get vin(){return this.data.vin.map((e,t)=>new aa(this.data,t))}get vout(){return this.data.vout.map(e=>new ia(e))}get locktime(){return new oa(this.data.locktime)}get base(){return v.encode(this.data,!0)}get buff(){return v.encode(this.data)}get raw(){return this.buff.raw}get hex(){return this.buff.hex}get size(){return this.raw.length}get bsize(){return this.base.length}get weight(){return 3*this.bsize+this.size}get vsize(){var e=0<this.weight%4?1:0;return Math.floor(this.weight/4)+e}get hash(){return this.buff.toHash("hash256").reverse().hex}get txid(){return this.base.toHash("hash256").reverse().hex}async export(){var{size:e,weight:t,vsize:r,hex:n}=this;return{txid:this.txid,hash:this.hash,...this.data,size:e,weight:t,vsize:r,hex:n}}},n.Tx=v,n.Witness=sa,n}({});